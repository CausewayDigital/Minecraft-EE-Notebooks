{"version":3,"sources":["../../../src/storage/contentProvider.ts","../../../src/types/ILessonData.ts","../../../src/storage/activeTabProvider.ts","../../../src/communcation/minecraftCommander.ts","../../../../src/communcation/Commands/CodebuilderRuntime.ts","../../../src/mocks/mockMinecraftCommander.ts","../../../src/mocks/mockIpcTelemetry.ts","../../src/config.ts","../../../src/components/ButtonsPanel.tsx","../../../src/localization/en.ts","../../../src/localization/zh-cn.ts","../../../src/components/OutputPanel.tsx","../../../src/protocol/index.ts","../../../src/protocol/runtime.ts","../../../src/protocol/mockRuntime.ts","../../src/cellSettingsProcessor.ts","../../src/theme.ts","components/Tab.tsx","components/TabDropdown.tsx","components/TabArrow.tsx","components/Tabs.tsx","telemetry.ts","components/Notebook.tsx","types.ts","components/FooterButtons.tsx","notebookViewController.tsx","localization/en.ts","evergladeSettings.ts","localization/index.ts","localization/zh-cn.ts","components/ErrorBoundary.tsx","lessonData.ts","azureNotebookLoader.ts","index.tsx","../../src/index.ts","../../src/types.ts","../../src/extensionSettings.ts","../../../../src/communcation/Commands/Commands.ts","../../src/UrlReader.ts","../../src/logger.ts","../../../../src/communcation/Commands/Scoreboard.ts","../../../src/mocks/mockEvent.ts","../../../src/localization/index.ts","../../../src/protocol/types.ts"],"names":["json","e","RuntimeAction","this","callbacks","config","mainFrame","showStatusBar","showCommandBar","showCellBanner","showCellVerticalToolbar","showCellToolbar","enableDragDrop","theme","keyboardShortcuts","ctrlEnter","shiftEnter","codeCell","prompt","showCounter","showExecuteButton","outputs","precedingComponents","editor","showLineNumber","markdownCell","viewOnly","props","i","logger","numberOfLinesInEditor","base","variables","monacoTheme","inherit","rules","colors","Tab","React","forwardRef","ref","myClassName","isActive","id","toString","className","role","data-toggle","aria-controls","aria-selected","data-tabindex","onClick","name","displayName","TabDropdown","aria-haspopup","aria-expanded","Tabs","map","idx","path","key","bind","DropdownOption","Component","TabArrow","classId","isLeftArrow","isDisabled","undefined","ipcTelemetry","tabContainer","leftArrow","rightArrow","dropDown","tabs","resizeTimeout","select","onActivate","resizeCallback","Array","leftArrowRef","createRef","forEach","push","state","showNavigationTabs","navBarStartIndex","navBarEndIndex","length","anchorRight","navBarTotalWidth","url","tabIndex","repopulate","window","addEventListener","initalizeWidths","prevProps","prevState","activeTabIndex","current","offsetWidth","totalWidth","shouldDisplay","updateNavBarEndIndex","onclick","currentWidth","setState","width","isResize","clientWidth","repopulateRightAnchored","repopulateLeftAnchored","shouldUseRightAnchored","forceUpdate","clearTimeout","setTimeout","isShown","removeEventListener","getIpcTelemetry","MockIpcTelemetry","register","location","href","aznbErrorListener","error","Notebook","rootElement","document","getElementById","console","warn","activate","notebookUrl","_","nextState","FooterButtons","classes","previousButton","disabled","aria-hidden","nextButton","NotebookViewController","LessonData","TelemetryProvider","ActiveTabProvider","hasLoaded","tabProps","activeTabPath","onActivateByIndex","localStorage","ipcRenderer","MinecraftCommander","getInstance","MockMinecraftCommander","component","initEvent","components","telemetry","comp","func","a","startTime","performance","now","details","timeElapsed","Math","trunc","getLessonData","setName","creatorName","title","azureNotebookLoader","initalize","params","language","load","notebookCount","message","log","filename","isLanguageSupported","additionalLanguages","rootNotebookPath","tabIndexFunctor","get","lessonJsonPath","activityTracker","data","activitySelectorObjective","then","activeTab","Promise","all","pages","page","getNotebookPath","contentProvider","notebook","metadata","minecraft","page_name","Error","pagePaths","index","getTabPathFromIndex","setContext","loadComponent","ErrorBoundaryMessage","ErrorInfoPrefix","settings","ps","origin","result","Object","keys","k","createPesudoStrings","en","strings","LocalizedStrings","setLanguage","ErrorBoundary","telemetryLogger","hasError","errorMessage","locStrings","getLanguage","style","color","children","defaultIsLanguageSupported","lang","includes","bypassCache","httpOptions","method","headers","create","mode","cache","fetch","response","ValidateLessonData","catch","AzureNotebookLoader","rootElementId","isInitalized","locale","MinecraftExtension","AzureNotebooks","registerExtension","init","userHasGivenCookieConsent","lazyLoadEditor","getResourceIdAndKey","resolve","notebookResourceId","notebookResourceKey","filepath","loadNotebook","parentElementId","filePath","disableOutputIframe","mapLocaleToAznbLocale","extensions","nb","compute","targetUrl","getAuthSettings","authType","token","shouldMount","setCompute","targetSettings","parameters","ExtractUrlParams","JSON","stringify","ReactDOM","render","GetLessonData","disableLessonDataCache","NotebookContentProvider","logToConsole","extension","context","header","request","noop","formatMsg","msg","num","Number","isNaN","objectiveName","selector","throwOnError","event","events","en_1","default"],"mappings":"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","file":"static/js/main.30a0784c.chunk.js","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass NotebookContentError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = \"NotebookContentError\";\n    }\n}\nexports.NotebookContentError = NotebookContentError;\n/**\n *  Handles retriving Notebook contents from the web or local cache.\n *       Services that manage the storage url should adhere to the following:\n *       - We expect etag to be present in the request header with 'etag' as string. (Make sure header is exposed under CORS)\n *       - We expect Conditional GET's with  `If-None-Match: ${etag}` to work.\n *       - For local file access to work, thr url should handle local file CORS access.\n */\nclass NotebookContentProvider {\n    constructor(localStorageProvider, logger = console) {\n        this.baseKey = \"meeaznb/\";\n        this.localStorageProvider = localStorageProvider;\n        this.logger = logger;\n    }\n    clear(all = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (all) {\n                this.localStorageProvider.clear();\n            }\n            else {\n                for (let i = 0; i < this.localStorageProvider.length; i++) {\n                    let val = this.localStorageProvider.key(i);\n                    if (val.startsWith(this.baseKey)) {\n                        this.localStorageProvider.removeItem(val);\n                    }\n                }\n            }\n        });\n    }\n    buildKey(url) {\n        return this.baseKey + url;\n    }\n    save(url, notebook) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.localStorageProvider.setItem(this.buildKey(url), JSON.stringify(notebook));\n        });\n    }\n    /**\n     *\n     * @param url - The Notebook url where we will fetch content.\n     * @param shouldCache - If this is disabled we don't cache the content.\n     */\n    get(url, shouldCache = true) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            let jsonContent = {};\n            let localEtag;\n            {\n                let content = this.localStorageProvider.getItem(this.buildKey(url));\n                if (content) {\n                    try {\n                        jsonContent = JSON.parse(content);\n                        localEtag = (_a = jsonContent === null || jsonContent === void 0 ? void 0 : jsonContent.metadata) === null || _a === void 0 ? void 0 : _a.etag;\n                    }\n                    catch (e) {\n                        this.logger.log('Invalid json found, disregarding content. Error:' + e.message);\n                    }\n                }\n            }\n            const httpOptions = {\n                method: \"GET\",\n                headers: Object.create(null),\n                mode: \"cors\",\n                cache: \"no-store\" // Don't use platform cache anything, we handle it with localEtags ourselves.\n            };\n            if (localEtag) {\n                httpOptions.headers = Object.assign(Object.assign({}, httpOptions.headers), { \"If-None-Match\": localEtag });\n            }\n            try {\n                let response = yield fetch(url, httpOptions);\n                if (response.ok) {\n                    try {\n                        let notebook = yield response.json();\n                        if (!notebook.metadata) {\n                            notebook.metadata = new Object();\n                        }\n                        notebook.metadata.etag = response.headers.get(\"etag\");\n                        if (shouldCache) {\n                            this.save(url, notebook);\n                        }\n                        return notebook;\n                    }\n                    catch (e) {\n                        throw e;\n                    }\n                }\n                else {\n                    if (response.status === 304) {\n                        this.logger.log(`Using localstorage cache for ${url}`);\n                        return jsonContent;\n                    }\n                    else {\n                        throw new NotebookContentError(response.statusText);\n                    }\n                }\n            }\n            catch (e) {\n                throw new NotebookContentError(e.message);\n            }\n        });\n    }\n}\nexports.NotebookContentProvider = NotebookContentProvider;\n//# sourceMappingURL=contentProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Validates data that is coming from an external source.\nfunction ValidateLessonData(json) {\n    return json.creatorName && typeof json.creatorName === \"string\"\n        && json.title && typeof json.title === \"string\"\n        && json.description && typeof json.description === \"string\"\n        && json.pages && (json.pages instanceof Array) && json.pages.length > 0\n        && json.pages.every((element) => {\n            return typeof element === \"string\";\n        });\n}\nexports.ValidateLessonData = ValidateLessonData;\nvar ActivityTrackerType;\n(function (ActivityTrackerType) {\n    ActivityTrackerType[\"scoreboard\"] = \"scoreboard\";\n})(ActivityTrackerType = exports.ActivityTrackerType || (exports.ActivityTrackerType = {}));\n//# sourceMappingURL=ILessonData.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Scoreboard_1 = require(\"../communcation/Commands/Scoreboard\");\nclass ActiveTabProvider {\n    constructor(localStorageProvider, minecraftCommandProvider, logger = console) {\n        this.baseKey = \"meeaznb/\";\n        this.localStorageProvider = localStorageProvider;\n        this.minecraftCommander = minecraftCommandProvider;\n        this.logger = logger;\n    }\n    buildKey(id) {\n        return this.baseKey + id;\n    }\n    get(lessonId, objective, callback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (objective && callback) {\n                this.minecraftCommander.subscribe(new Scoreboard_1.CodeBuilderScoreChangedCommand(true), (result) => {\n                    callback({ activeTabIndex: result.Score });\n                });\n                let scoreboardValue = yield this.minecraftCommander.send(new Scoreboard_1.GetAndListenScoreboardCommand(objective, \"@s\", false));\n                if (scoreboardValue && scoreboardValue > 0) {\n                    return { activeTabIndex: scoreboardValue };\n                }\n            }\n            let content = this.localStorageProvider.getItem(this.buildKey(lessonId));\n            if (content) {\n                let num = Number(content);\n                if (!isNaN(num) && (num > 0)) {\n                    return { activeTabIndex: num };\n                    ;\n                }\n            }\n            else {\n                return undefined;\n            }\n        });\n    }\n    set(lessonId, activeTab) {\n        this.localStorageProvider.setItem(this.buildKey(lessonId), activeTab.activeTabIndex.toString());\n    }\n}\nexports.ActiveTabProvider = ActiveTabProvider;\n//# sourceMappingURL=activeTabProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass MinecraftCommander {\n    constructor(ipcRenderer, logger = console) {\n        this.ipcRenderer = ipcRenderer;\n        this.logger = logger;\n        this.eventQueue = new Map();\n        this.subscriptionQueue = new Map();\n        this.ipcRenderer.on('responseFromApp', (eventName, event) => {\n            try {\n                let data = JSON.parse(event);\n                if (data && data.header && data.body) {\n                    if (data.header.messagePurpose == \"event\") {\n                        if (data.body.eventName && this.subscriptionQueue.has(data.body.eventName)) {\n                            const [command, callback] = this.subscriptionQueue.get(data.body.eventName);\n                            try {\n                                let payload = command.parse(data.body);\n                                callback(payload);\n                            }\n                            catch (e) {\n                                logger.log(`Swallowing: ipcRenderer Response Error: ${e}`);\n                            }\n                        }\n                    }\n                    else {\n                        if (this.eventQueue.has(data.header.requestId)) {\n                            const [command, resolve, reject] = this.eventQueue.get(data.header.requestId);\n                            this.eventQueue.delete(data.header.requestId);\n                            try {\n                                resolve(command.responseHandler(data));\n                            }\n                            catch (e) {\n                                reject(e);\n                            }\n                        }\n                    }\n                }\n            }\n            catch (e) {\n                this.logger.error(`Swallowing: ${e.message}`);\n            }\n        });\n    }\n    static getInstance(ipcRenderer, logger = console) {\n        if (!MinecraftCommander.instance) {\n            MinecraftCommander.instance = new MinecraftCommander(ipcRenderer, logger);\n        }\n        return MinecraftCommander.instance;\n    }\n    subscribe(command, callback) {\n        if (this.ipcRenderer && command.request.body.eventName) {\n            this.subscriptionQueue.set(command.request.body.eventName, [command, callback]);\n            this.ipcRenderer.sendToHost('sendToApp', command.request);\n        }\n        else {\n            throw new Error('Error: Could not send command. IpcRenderer not available OR Subscription command is invalid.');\n        }\n    }\n    send(commandJson) {\n        if (this.ipcRenderer) {\n            console.log(`Sending Message: ${commandJson.request}`);\n            return new Promise((resolve, reject) => {\n                this.eventQueue.set(commandJson.request.header.requestId, [commandJson, resolve, reject]);\n                this.ipcRenderer.sendToHost('sendToApp', commandJson.request);\n            });\n        }\n        else {\n            throw new Error('Error: Could not send command. IpcRenderer not available.');\n        }\n    }\n    on(event, listener) {\n        this.ipcRenderer.on(event, listener);\n    }\n    removeListener(event, listener) {\n        this.ipcRenderer.removeListener(event, listener);\n    }\n    once(event, listener) {\n        this.ipcRenderer.once(event, listener);\n    }\n}\nexports.MinecraftCommander = MinecraftCommander;\n//# sourceMappingURL=minecraftCommander.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Commands_1 = require(\"./Commands\");\nvar RuntimeAction;\n(function (RuntimeAction) {\n    RuntimeAction[\"Start\"] = \"Start\";\n    RuntimeAction[\"Stop\"] = \"Stop\";\n    RuntimeAction[\"Pause\"] = \"Pause\";\n})(RuntimeAction = exports.RuntimeAction || (exports.RuntimeAction = {}));\nclass CodebuidlerRuntimeActionCommand extends Commands_1.GenericListenerCommand {\n    constructor(throwOnError = false) {\n        super(`CodeBuilderRuntimeAction`, throwOnError);\n    }\n    parse(body) {\n        if (body.properties && (body.properties.RuntimeAction !== undefined)) {\n            return { RuntimeAction: body.properties.RuntimeAction };\n        }\n        else {\n            throw new Error(`CodebuidlerRuntimeActionCommand::Parse does not contain required values body: ${JSON.stringify(body)}`);\n        }\n    }\n}\nexports.CodebuidlerRuntimeActionCommand = CodebuidlerRuntimeActionCommand;\n//# sourceMappingURL=CodebuilderRuntime.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mockEvent_1 = require(\"./mockEvent\");\nconst UrlReader_1 = require(\"../UrlReader\");\nclass MockMinecraftCommander extends mockEvent_1.MockEvent {\n    constructor(callback) {\n        super();\n        this.callback = callback;\n        if (UrlReader_1.IsInGame()) {\n            throw new Error('Currently in game. MockCommander shouldnt be enalbed.');\n        }\n        else {\n            console.log('Creating Mock Mincraft Commander');\n        }\n    }\n    subscribe(command, callback) {\n        console.log(\"Subscription1!!\");\n    }\n    send(command) {\n        if (this.callback) {\n            return this.callback.onSend(command);\n        }\n        else {\n            console.log(`MockMinecraftCommander.send:${command.request}`);\n            Promise.resolve(undefined);\n        }\n    }\n}\nexports.MockMinecraftCommander = MockMinecraftCommander;\n//# sourceMappingURL=mockMinecraftCommander.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mockEvent_1 = require(\"./mockEvent\");\nconst UrlReader_1 = require(\"../UrlReader\");\nclass MockIpcTelemetry extends mockEvent_1.MockEvent {\n    constructor(callbacks) {\n        super();\n        this.callbacks = callbacks;\n        if (UrlReader_1.IsInGame()) {\n            throw new Error('Currently in game. Mock shouldnt be enalbed.');\n        }\n        else {\n            console.log(\"Creating Mock IpcTelemetry\");\n        }\n    }\n    register(editorName, url, context) {\n        if (this.callbacks) {\n            this.callbacks.register(editorName, url, context);\n        }\n        else {\n            this.setUrl(url);\n            this.setName(editorName);\n            this.setContext(context);\n        }\n    }\n    setUrl(url) {\n        if (this.callbacks) {\n            this.callbacks.setUrl(url);\n        }\n        else {\n            this.url = url;\n        }\n    }\n    setContext(context) {\n        if (this.callbacks) {\n            this.callbacks.setContext(context);\n        }\n        else {\n            this.context = context;\n        }\n    }\n    setName(name) {\n        if (this.callbacks) {\n            this.callbacks.setName(name);\n        }\n        else {\n            this.editorName = name;\n        }\n    }\n    log(message) {\n        if (this.callbacks) {\n            this.callbacks.log(message);\n        }\n        else {\n            console.log(`MockIpcTelemetry: ${message}`);\n        }\n    }\n    warn(message) {\n        if (this.callbacks) {\n            this.callbacks.warn(message);\n        }\n        else {\n            console.warn(`MockIpcTelemetry: ${message}`);\n        }\n    }\n    error(message) {\n        if (this.callbacks) {\n            this.callbacks.error(message);\n        }\n        else {\n            console.error(`MockIpcTelemetry: ${message}`);\n        }\n    }\n}\nexports.MockIpcTelemetry = MockIpcTelemetry;\n//# sourceMappingURL=mockIpcTelemetry.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst types_1 = require(\"./types\");\nconst config = {\n    mainFrame: {\n        showStatusBar: false,\n        showCommandBar: false,\n        showCellBanner: false,\n        showCellVerticalToolbar: false,\n        showCellToolbar: false,\n        enableDragDrop: false,\n        theme: \"minecraft\",\n        keyboardShortcuts: {\n            ctrlEnter: true,\n            shiftEnter: false\n        }\n    },\n    codeCell: {\n        prompt: {\n            showCounter: false,\n            showExecuteButton: false\n        },\n        outputs: {\n            precedingComponents: [\n                {\n                    key: \"buttonspanel\",\n                    component: \"ButtonsPanel\"\n                }\n            ]\n        },\n        editor: {\n            showLineNumber: true\n        }\n    },\n    markdownCell: {\n        viewOnly: true\n    },\n    // Description of each option can be found at https://devdiv.visualstudio.com/DevDiv/_git/AzureNotebooks?path=%2Fdocs%2Fapi%2Fextension-contract.imonacoeditoroptions.md&_a=preview&version=GBmaster\n    // The options are exact the same options get passed into monaco-editors, you can also test and play with the options on monaco's playground app:\n    // https://microsoft.github.io/monaco-editor/playground.html#creating-the-editor-editor-basic-options\n    monacoOptions: {\n        wordWrap: \"on\",\n        lineNumbersMinChars: 3,\n        scrollbar: {\n            vertical: \"auto\"\n        },\n        quickSuggestions: {\n            other: false,\n            comments: false,\n            strings: false\n        },\n        parameterHints: {\n            enabled: false\n        },\n        suggestOnTriggerCharacters: false,\n        acceptSuggestionOnEnter: \"off\",\n        tabCompletion: \"off\",\n        wordBasedSuggestions: false,\n        contextmenu: false,\n        gotoLocation: { multiple: \"goto\" },\n        codeLens: false,\n        lightbulb: { enabled: false }\n    },\n    compute: {\n        protocol: types_1.MyComputeProtocol\n    },\n    cellSettingProcessors: [\"minecraft-metadata\"]\n};\nexports.default = config;\n//# sourceMappingURL=config.js.map","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = __importStar(require(\"react\"));\nconst types_1 = require(\"../types\");\nconst logger_1 = require(\"../logger\");\nconst localization_1 = require(\"../localization\");\nconst OutputPanel_1 = require(\"./OutputPanel\");\nconst core_library_1 = require(\"core-library\");\nconst logger = logger_1.createLogger(\"ButtonsPanel\");\n/**\n * Panel to place buttons\n */\nclass ButtonsPanel extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.myRef = React.createRef();\n        this.onRunButtonClicked = this.onRunButtonClicked.bind(this);\n        this.onStopButtonClicked = this.onStopButtonClicked.bind(this);\n        this.onResetCodeButtonClicked = this.onResetCodeButtonClicked.bind(this);\n        this.onResetWorldButtonClicked = this.onResetWorldButtonClicked.bind(this);\n        this.minecraftCommander = (window === null || window === void 0 ? void 0 : window.ipcRenderer) ? core_library_1.MinecraftCommander.getInstance(window.ipcRenderer)\n            : new core_library_1.MockMinecraftCommander();\n    }\n    componentDidMount() {\n        const isReadOnlyEditor = this.props.settings.editor.readOnly;\n        if (isReadOnlyEditor) {\n            const locStrings = localization_1.getLocStrings();\n            var node = this.myRef.current;\n            var parentCell = node.closest(\".cell-container\");\n            const messageString = locStrings.ReadOnlyEditorMessage\n                ? locStrings.ReadOnlyEditorMessage\n                : \"HARDCODED: Example Code - Read Only\";\n            parentCell.setAttribute(\"data-read-only-msg\", messageString);\n        }\n    }\n    render() {\n        const { cell, settings } = this.props;\n        if (cell.cell_type !== \"code\" || settings.cellType !== \"code\") {\n            return null;\n        }\n        const locStrings = localization_1.getLocStrings();\n        const cellStatus = settings.cellStatus;\n        const isRunning = cellStatus === \"busy\" || cellStatus === \"queued\";\n        const output = cell.outputs.first(null);\n        return (React.createElement(\"div\", { ref: this.myRef, className: \"editor-buttons-panel ${isReadOnlyEditor ? 'read-only-editor-msg' : ''}\" },\n            React.createElement(\"hr\", { className: \"standard-hr\" }),\n            React.createElement(\"div\", { className: \"button-group\" },\n                isRunning ? (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", onClick: this.onStopButtonClicked },\n                    React.createElement(\"i\", { className: \"icon icon_stop\", \"aria-hidden\": \"true\" }),\n                    \"\\u00A0\",\n                    locStrings.ButtonStop)) : (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", onClick: this.onRunButtonClicked },\n                    React.createElement(\"i\", { className: \"icon icon_play\", \"aria-hidden\": \"true\" }),\n                    \"\\u00A0\",\n                    locStrings.ButtonRun)),\n                this.shouldHideCodeReset() ? null : (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", onClick: this.onResetCodeButtonClicked },\n                    React.createElement(\"i\", { className: \"icon icon_refresh\", \"aria-hidden\": \"true\" }),\n                    \"\\u00A0\",\n                    locStrings.ButtonResetCode)),\n                this.shouldHideWorldReset() ? null : (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", onClick: this.onResetWorldButtonClicked },\n                    React.createElement(\"i\", { className: \"icon icon_refresh\", \"aria-hidden\": \"true\" }),\n                    \"\\u00A0\",\n                    locStrings.ButtonResetWorld))),\n            React.createElement(OutputPanel_1.OutputPanel, { output: output, isRunning: isRunning })));\n    }\n    onRunButtonClicked() {\n        if (this.props.cell.source.length > 0) {\n            this.props.commands.notebook.cells.run(this.props.cellId);\n        }\n    }\n    onStopButtonClicked() {\n        this.props.commands.notebook.kernels.interrupt();\n    }\n    onResetCodeButtonClicked() {\n        this.props.commands.notebook.cells.clearOutputs(this.props.cellId);\n        this.props.commands.notebook.kernels.interrupt();\n        const defaultCode = this.props.cell.metadata.getIn([\n            types_1.MetadataNamespace,\n            \"default_code\"\n        ]);\n        let codeString = undefined;\n        if (typeof defaultCode === \"string\") {\n            codeString = defaultCode;\n        }\n        else if (Array.isArray(defaultCode)) {\n            codeString = defaultCode.join(\"\");\n        }\n        else if (codeString === undefined) {\n            codeString = \"\";\n        }\n        else {\n            // Other types are unexpected, it means the content is written in a wrong format\n            logger.log(`Error: unexpected type of default_code:'${typeof defaultCode}' defined for cell '${this.props.cellId}'`);\n        }\n        if (codeString !== undefined) {\n            this.props.commands.notebook.cells.setContent(this.props.cellId, codeString);\n        }\n    }\n    onResetWorldButtonClicked() {\n        this.props.commands.notebook.kernels.interrupt();\n        const resetWorldCommand = this.props.cell.metadata.getIn([\n            types_1.MetadataNamespace,\n            \"resetWorldCommand\"\n        ]);\n        if (resetWorldCommand) {\n            this.minecraftCommander.send(new core_library_1.AnyCommand(resetWorldCommand));\n        }\n    }\n    shouldHideCodeReset() {\n        const defaultCode = this.props.cell.metadata.getIn([\n            types_1.MetadataNamespace,\n            \"default_code\"\n        ]);\n        return defaultCode == undefined;\n    }\n    shouldHideWorldReset() {\n        const resetWorldCommand = this.props.cell.metadata.getIn([\n            types_1.MetadataNamespace,\n            \"resetWorldCommand\"\n        ]);\n        return resetWorldCommand == undefined;\n    }\n}\nexports.ButtonsPanel = ButtonsPanel;\n//# sourceMappingURL=ButtonsPanel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    ButtonRun: \"Run\",\n    ButtonStop: \"Stop\",\n    ButtonResetCode: \"Reset Code\",\n    ButtonResetWorld: \"Reset World\",\n    ReadOnlyEditorMessage: \"Example Code - Read Only\",\n    // Messages in output panel\n    ExecutionCompletesSuccessfully: \"Execution completed successfully!\",\n    ExecutionCancelled: \"Execution is cancelled\",\n    ExecutionInProcess: \"Execution is in process\",\n    ExecutionError: \"Error: {0}\"\n};\n//# sourceMappingURL=en.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    ButtonRun: \"运行\",\n    ButtonStop: \"停止\",\n    ButtonResetCode: \"重置代码\",\n    ButtonResetWorld: \"重置关卡\",\n    ReadOnlyEditorMessage: \"示例代码- 不可修改\",\n    // Messages in output panel\n    ExecutionCompletesSuccessfully: \"执行成功!\",\n    ExecutionCancelled: \"任务取消\",\n    ExecutionInProcess: \"任务执行中\",\n    ExecutionError: \"错误: {0}\"\n};\n//# sourceMappingURL=zh-cn.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst types_1 = require(\"../protocol/types\");\nconst localization_1 = require(\"../localization\");\nclass OutputPanel extends react_1.default.PureComponent {\n    constructor(props) {\n        super(props);\n        this.MPS_INIT = 0;\n        this.MPS_OPEN = 1;\n        this.MPS_CLOSE = 2;\n        this.messagePanelState = this.MPS_INIT;\n    }\n    render() {\n        const { output, isRunning } = this.props;\n        const locStrings = localization_1.getLocStrings();\n        let message = \"\";\n        let stateClass = \"none\";\n        if (isRunning) {\n            message = locStrings.ExecutionInProcess;\n            stateClass = \"running\";\n            this.messagePanelState = this.MPS_OPEN;\n        }\n        else if (output) {\n            if (output.output_type === \"execute_result\") {\n                message = output.data[\"text/html\"];\n                if (message === types_1.ResultMessages.ExecutionSucceeds) {\n                    message = locStrings.ExecutionCompletesSuccessfully;\n                    stateClass = \"standard\";\n                }\n                else if (message === types_1.ResultMessages.ExecutionCancelled) {\n                    message = locStrings.ExecutionCancelled;\n                    stateClass = \"warning\";\n                }\n                this.messagePanelState = this.MPS_OPEN;\n            }\n            else if (output.output_type === \"error\") {\n                message = locStrings.formatString(locStrings.ExecutionError, output.evalue);\n                stateClass = \"error\";\n                this.messagePanelState = this.MPS_OPEN;\n            }\n            else {\n                // We shouldn't fall into this branch, or it could be a bug\n                console.error(`Unexpected output_type from output:'${JSON.stringify(output)}'`);\n            }\n        }\n        else {\n            this.messagePanelState = this.MPS_CLOSE;\n        }\n        let panelStateClass = \"\";\n        switch (this.messagePanelState) {\n            case this.MPS_INIT:\n                break;\n            case this.MPS_OPEN:\n                panelStateClass = \"output-message-root--open\";\n                break;\n            case this.MPS_CLOSE:\n                panelStateClass = \"output-message-root--closed\";\n                break;\n            default:\n                console.error(\"Unhandeled messagePanelState: \" + this.messagePanelState);\n        }\n        return (react_1.default.createElement(\"div\", { className: \"output-message-root \" + panelStateClass },\n            react_1.default.createElement(\"hr\", { className: \"standard-hr\" }),\n            react_1.default.createElement(\"div\", { className: \"output-message-container \" + stateClass }, message)));\n    }\n}\nexports.OutputPanel = OutputPanel;\n//# sourceMappingURL=OutputPanel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar runtime_1 = require(\"./runtime\");\nexports.createRuntime = runtime_1.createRuntime;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable @typescript-eslint/camelcase */\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst mockRuntime_1 = require(\"./mockRuntime\");\nconst core_contract_1 = require(\"@aznb/core-contract\");\nconst types_1 = require(\"../types\");\nconst logger_1 = require(\"../logger\");\nconst core_library_1 = require(\"core-library\");\nconst types_2 = require(\"./types\");\nconst logger = logger_1.createLogger(\"Minecraft-Runtime\");\nconst createMessageStream = (ipc) => {\n    const messages = new rxjs_1.Subject();\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const bridge = (eventName, payload) => {\n        messages.next({\n            eventName,\n            payload: payload ? JSON.parse(payload) : undefined\n        });\n    };\n    ipc.on(\"InitializationComplete\", bridge);\n    ipc.on(\"CompilationCompleted\", bridge);\n    ipc.on(\"ExecutionStarted\", bridge);\n    ipc.on(\"Error\", bridge);\n    ipc.on(\"Completed\", bridge);\n    return messages;\n};\n/**\n * Create a plain result\n *\n * @param {string} msg message to show in the result\n * @param {number} executionCount execution count\n * @returns {IExecutionHtmlOutput} result message to the notebook component\n */\nfunction createPlainResult(msg, executionCount) {\n    const output = {\n        type: \"html\",\n        executionCount,\n        metadata: {},\n        result: msg\n    };\n    return output;\n}\n// const redColorHeader = \"\\u001b[31m\";\n// /**\n//  * Create error marker info\n//  *\n//  * @param {number} lineNumber line number of the error\n//  * @param {string} message message to display for the error\n//  * @returns {IMarkerData} marker data\n//  */\n// function createErrorMarker(lineNumber: number, message: string): IMarkerData {\n//   return {\n//     startLineNumber: lineNumber,\n//     startColumn: 1,\n//     endLineNumber: lineNumber,\n//     endColumn: 1000,\n//     message\n//   };\n// }\n/**\n * Create error result\n *\n * @param {string} eventName name of the error\n * @param {number} lineOffset offset of line number in source where error occurs so we can adjust that in error markers\n * @param {number} executionCount execution count\n * @param {IError[]} errors errors\n * @returns {IExecutionErrorOutput} error output\n */\nfunction createErrorResult(eventName, lineOffset, executionCount, errors) {\n    const traceback = errors.map((e) => e.details);\n    const markers = errors.map(e => {\n        // TODO: use the value from error.line after error.line is fixed to correctly locate the line with error.\n        const match = e.details.match(/line (\\d+)/);\n        const lineNumber = (match ? Number(match[1]) : e.line) + lineOffset;\n        return {\n            startLineNumber: lineNumber,\n            startColumn: 1,\n            endLineNumber: lineNumber,\n            endColumn: 1000,\n            severity: core_contract_1.EditorMarkerSeverity.Error,\n            message: e.summary\n        };\n    });\n    const errOutput = {\n        type: \"error\",\n        executionCount,\n        errorTarget: eventName,\n        errorMessage: errors.length > 0 ? errors[0].summary : \"unknown\",\n        errorDetails: traceback,\n        errorMarkers: markers,\n        metadata: {}\n    };\n    return errOutput;\n}\nconst handleCodeListener = (id, map) => {\n    if (map === null || map === void 0 ? void 0 : map.has(id)) {\n        map.get(id)();\n    }\n};\nconst messageToExecuteOutput = (message, executionCount, codeListener, metadata) => {\n    console.log(\"messageToExecuteOutput started\");\n    let msg = JSON.stringify(message.payload);\n    metadata = metadata || {};\n    const lineOffset = metadata.lineOffset || 0;\n    if (message.eventName === \"Error\") {\n        handleCodeListener(types_1.CodeListenerIds.onCodeErrorCommand, codeListener);\n        return createErrorResult(message.eventName, lineOffset, executionCount, message.payload.errors || []);\n    }\n    else if (message.eventName === \"Completed\") {\n        handleCodeListener(types_1.CodeListenerIds.onCodeStoppedCommand, codeListener);\n        const { success } = message.payload;\n        if (success === \"Succeeded\") {\n            handleCodeListener(types_1.CodeListenerIds.onCodeSuccessfulCommand, codeListener);\n            msg = types_2.ResultMessages.ExecutionSucceeds;\n        }\n        else if (success === \"Cancelled\") {\n            handleCodeListener(types_1.CodeListenerIds.onCodeCancelledCommand, codeListener);\n            msg = types_2.ResultMessages.ExecutionCancelled;\n        }\n    }\n    else if (message.eventName === \"CompilationCompleted\") {\n        const { errors } = message.payload;\n        if (!errors || errors.length === 0) {\n            msg = types_2.ResultMessages.CompilationSucceeds;\n        }\n        else {\n            return createErrorResult(message.eventName, lineOffset, executionCount, errors);\n        }\n    }\n    return createPlainResult(msg, executionCount);\n};\n/**\n * create runtime as the compute target\n *\n * @returns {IStandardComputeProtocol} a runtime supporting the {IStandardComputeProtocol}\n */\nfunction createRuntime() {\n    const clientLogger = window.ipcTelemetry\n        ? window.ipcTelemetry\n        : new core_library_1.MockIpcTelemetry();\n    const minecraftCommander = (window === null || window === void 0 ? void 0 : window.ipcRenderer) ? core_library_1.MinecraftCommander.getInstance(window.ipcRenderer)\n        : new core_library_1.MockMinecraftCommander();\n    let executionCount = 0;\n    let isInExecution = false;\n    let pythonHost;\n    let codeScreenRenderer;\n    let message$;\n    let inits$;\n    let compiles$;\n    let executionResult$;\n    const storageProvider = new core_library_1.NotebookContentProvider(localStorage, logger);\n    /**\n     * Initialize the compute to get ready for connection from the azure notebook component\n     *\n     * @param input parameters for initialization\n     */\n    const initialize = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`initializeCompute is called with input ${JSON.stringify(input)}`);\n        codeScreenRenderer =\n            window.ipcCodeScreenRenderer || mockRuntime_1.createIpcCodeScreenRenderer();\n        pythonHost = window.ipcPython || mockRuntime_1.createIpcPythonMock();\n        message$ = createMessageStream(pythonHost);\n        inits$ = message$.pipe(operators_1.filter(m => m.eventName === \"InitializationComplete\"), operators_1.first());\n        isInExecution = false;\n        message$.pipe(operators_1.filter(m => m.eventName === \"ExecutionStarted\")).subscribe({\n            next: () => {\n                isInExecution = true;\n            }\n        });\n        executionResult$ = message$.pipe(operators_1.filter(m => m.eventName === \"Completed\" || m.eventName === \"Error\"));\n        executionResult$.subscribe({\n            next: () => {\n                isInExecution = false;\n            }\n        });\n        compiles$ = message$.pipe(operators_1.filter(m => m.eventName === \"CompilationCompleted\"));\n        compiles$.pipe(operators_1.tap(m => {\n            logger.log(`Compile$ message: ${JSON.stringify(m)}`);\n        }));\n        return { message: \"done\" };\n    });\n    /**\n     * Handler to start the session when Azure Notebook Component call to connect the compute\n     *\n     * @param input parameters for establishing the connection\n     */\n    const connect = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`connectCompute is called with input ${JSON.stringify(input)}`);\n        pythonHost.initialize();\n        const result = yield inits$.toPromise();\n        return { message: `Done. Details: ${JSON.stringify(result)}` };\n    });\n    /**\n     * Handler to stop the connection when Azure Notebook Component call to disconnect from compute\n     *\n     * @param input Parameters for disconnecting the connection\n     */\n    const disconnect = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`disconnectCompute is called with input ${JSON.stringify(input)}`);\n        // TODO: anything we need to clear here?\n        return { message: \"done\" };\n    });\n    /**\n     * Gets the onCodeCommand mappings from metadata.\n     *\n     * @param cell NTeract Imutable Cell; Used to obatain relevant onCode Id's\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const getOnCodeListeners = (cell) => {\n        const codeListeners = new Map();\n        console.log(\"Started getOnCodeListeners\");\n        for (const key in types_1.CodeListenerIds) {\n            // TODO: Check if getin maps up to notebook metadata if cell is not available.\n            const val = cell.metadata.getIn([\"minecraft\", key]);\n            if (val) {\n                console.log(`Found getOnCodeListeneres ${key} --  ${val}`);\n                codeListeners.set(key, () => {\n                    minecraftCommander.send(new core_library_1.AnyCommand(val));\n                });\n            }\n        }\n        return codeListeners;\n    };\n    /**\n     * Handler to execute script for a cell\n     *\n     * @param input Parameters for executing script for a cell\n     */\n    const execute = (input) => __awaiter(this, void 0, void 0, function* () {\n        const { script, cell } = input;\n        logger.log(`executeCell is called with script '${script}'`);\n        try {\n            if (isInExecution) {\n                throw \"Previous execution is not completed yet.\";\n            }\n            else {\n                executionCount++;\n                let finalizedScript = script;\n                // check if the override code is present. If it is, wrap it around the user code.\n                const overrideCode = cell.metadata.getIn([\n                    \"minecraft\",\n                    \"overridePython\"\n                ]);\n                let overrideLineOffset = 0;\n                if (overrideCode) {\n                    logger.log(`Found Override Code: '${overrideCode}'`);\n                    // Find the @usercode tag in override code\n                    const usercodeTag = \"@user-code\";\n                    const usercodeIndex = overrideCode.search(usercodeTag);\n                    // Find out the number of prefix override lines\n                    overrideLineOffset =\n                        -1 *\n                            (overrideCode.substring(0, usercodeIndex).match(/\\n/g) || [])\n                                .length;\n                    // Combine override code with usercode\n                    const combinedOverrideScript = overrideCode.substring(0, usercodeIndex) +\n                        script +\n                        overrideCode.substring(usercodeIndex + usercodeTag.length);\n                    finalizedScript = combinedOverrideScript;\n                }\n                const onCodeListenerMap = getOnCodeListeners(cell);\n                handleCodeListener(types_1.CodeListenerIds.onCodeStartedCommand, onCodeListenerMap);\n                pythonHost.execute(finalizedScript);\n                clientLogger.log({\n                    action: \"execute\",\n                    codeListener: onCodeListenerMap.size,\n                    hasOverrideCode: overrideCode,\n                    scriptLength: script.length\n                });\n                // check if the closeCodeBuilderOnRun flag is on\n                const closeCodeBuilderOnRun = cell.metadata.getIn([types_1.MetadataNamespace, \"closeCodeBuilderOnRun\"]) ===\n                    true;\n                if (closeCodeBuilderOnRun) {\n                    codeScreenRenderer.dismiss();\n                }\n                // return outputs\n                const output = yield executionResult$\n                    .pipe(operators_1.first(), operators_1.map(r => messageToExecuteOutput(r, executionCount, onCodeListenerMap, {\n                    lineOffset: overrideLineOffset\n                })))\n                    .toPromise();\n                return { output };\n            }\n        }\n        catch (error) {\n            return {\n                output: {\n                    type: \"error\",\n                    errorTarget: \"sample runtime\",\n                    errorDetails: [],\n                    errorMessage: JSON.stringify(error),\n                    executionCount,\n                    metadata: {}\n                }\n            };\n        }\n    });\n    /**\n     * Handler to cancel an execution\n     *\n     * @param {IComputeInterruptOptions} input Parameters of the execution to be cancelled\n     * @returns {void}\n     */\n    const interrupt = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`interruptExecution is called with input ${JSON.stringify(input)}`);\n        pythonHost.cancel();\n    });\n    minecraftCommander.subscribe(new core_library_1.CodebuidlerRuntimeActionCommand(true), (result) => {\n        if (result && result.RuntimeAction == core_library_1.RuntimeAction.Stop) {\n            logger.log(\"interruptExecution is called from CodebuidlerRuntimeActionCommand\");\n            pythonHost.cancel();\n        }\n    });\n    /**\n     * Handler to return notebook content based on the given input parameter\n     *\n     * @param input Parameters to specify what notebook to fetch\n     */\n    const fetchContent = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`fetchContent is called with input ${JSON.stringify(input)}`);\n        const { url } = input;\n        const content = yield storageProvider.get(url, true);\n        return { content };\n    });\n    /**\n     * Handler to persist notebook to the given storage\n     *\n     * @param input Parameters contains info about the storage to persist the notebook\n     */\n    const saveContent = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`saveContent is called with for url ${input.url}`);\n        yield storageProvider.save(input.url, input.content);\n        const { url } = input;\n        return { url };\n    });\n    return {\n        type: \"standard\",\n        initialize,\n        connect,\n        disconnect,\n        execute,\n        interrupt,\n        fetchContent,\n        saveContent\n    };\n}\nexports.createRuntime = createRuntime;\n//# sourceMappingURL=runtime.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst logger_1 = require(\"../logger\");\nconst logger = logger_1.createLogger(\"Minecraft-Mock-Host\");\nconst ForceErrorStatement = \"!Force Error!\";\n/**\n * Determine whether we emit error for the given code\n *\n * @param {string} code source code to scan\n * @returns error payload if we are emitting error, or null if not\n */\nfunction checkError(code) {\n    if (code.indexOf(ForceErrorStatement) >= 0) {\n        const lines = code.split(\"\\n\");\n        const errorlines = [];\n        lines.forEach((l, i) => {\n            const startCol = l.indexOf(ForceErrorStatement);\n            if (startCol >= 0) {\n                const lineNumber = i + 1;\n                errorlines.push({\n                    context: \"\",\n                    details: `  File \"CodeBuilder Script\", line ${lineNumber}\n  ${l}\n  ${new Array(startCol + 1).join(\" \")}^\n  Error: Explicit Error by ${ForceErrorStatement}\n  `,\n                    line: lineNumber,\n                    summary: `Error: Explicit Error by ${ForceErrorStatement}`\n                });\n            }\n        });\n        return {\n            errors: errorlines,\n            scriptName: \"CodeBuilder Script\"\n        };\n    }\n    else {\n        return null;\n    }\n}\nconst emptyFunction = () => { };\n/**\n * create a mock runtime for testing purpose\n *\n * @returns a mock instance of ipcPython\n */\nexports.createIpcPythonMock = () => {\n    logger.log(\"createIpcPythonMock: Starting Mock!\");\n    const eventHandlers = {\n        InitializationComplete: emptyFunction,\n        CompilationCompleted: emptyFunction,\n        ExecutionStarted: emptyFunction,\n        Error: emptyFunction,\n        Completed: emptyFunction\n    };\n    let shouldCancelExecution = false;\n    const mock = {\n        initialize: () => {\n            logger.log(\"Initializing\");\n            setTimeout(() => {\n                eventHandlers.InitializationComplete({});\n                logger.log(\"Initialized\");\n            }, 1000);\n        },\n        execute: (code) => {\n            logger.log(`Executing Code:\\n${code}`);\n            eventHandlers.ExecutionStarted({});\n            shouldCancelExecution = false;\n            // complete after 3 seconds\n            setTimeout(() => {\n                if (shouldCancelExecution) {\n                    eventHandlers.Completed({\n                        details: \"\",\n                        scriptName: \"CodeBuilder Script\",\n                        success: \"Cancelled\"\n                    });\n                    logger.log(\"Cancelled Executing Code\");\n                }\n                else {\n                    const error = checkError(code);\n                    if (error) {\n                        eventHandlers.Error(error);\n                        logger.log(\"Error Executing Code\");\n                    }\n                    else {\n                        eventHandlers.Completed({\n                            details: `Executed Code: ${code}`,\n                            scriptName: \"CodeBuilder Script\",\n                            success: \"Succeeded\"\n                        });\n                        logger.log(\"Completed Executing Code\");\n                    }\n                }\n            }, 1000);\n        },\n        compile: (code) => {\n            logger.log(`Compiling Code:\\n${code}`);\n            setTimeout(() => {\n                const error = checkError(code);\n                if (error) {\n                    eventHandlers.Error(error);\n                    logger.log(\"Error Compiling Code\");\n                }\n                else {\n                    eventHandlers.CompilationCompleted({});\n                    logger.log(\"Completed Compiling Code\");\n                }\n            }, 1000);\n        },\n        cancel: () => {\n            shouldCancelExecution = true;\n            logger.log(\"Mark current execution cancelled\");\n        },\n        on: (eventName, handler) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            eventHandlers[eventName] = (payload) => handler(eventName, JSON.stringify(payload));\n        },\n        once: (eventName, handler) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            eventHandlers[eventName] = (payload) => handler(eventName, JSON.stringify(payload));\n        }\n    };\n    return mock;\n};\n/**\n * mock representation for ipcCodeScreenRenderer\n *\n * @returns {IIpcCodeScreenRenderer} mock of ipcCodeScreenRenderer\n */\nfunction createIpcCodeScreenRenderer() {\n    logger.log(\"Using Mock IPCCodeScreenRederer\");\n    const mock = {\n        dismiss: () => {\n            logger.log(\"MockHost: closing window\");\n        },\n        on: (event) => {\n            logger.log(`On event called ${event}`);\n        },\n        removeListener: (event) => {\n            logger.log(`removeListener called ${event}`);\n        },\n        once: (event) => {\n            logger.log(`once called ${event}`);\n        }\n    };\n    return mock;\n}\nexports.createIpcCodeScreenRenderer = createIpcCodeScreenRenderer;\n//# sourceMappingURL=mockRuntime.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst types_1 = require(\"./types\");\nexports.cellSettingsProcessor = (cellId, cell, settings) => {\n    let newSettings = settings;\n    // Only change the readonly setting to true when cell's metadata set readonly to true\n    const editorReadOnly = cell.metadata.getIn([\n        types_1.MetadataNamespace,\n        \"readonly\"\n    ]);\n    if (editorReadOnly === true && newSettings.editor.readOnly === false) {\n        newSettings = newSettings.setIn([\"editor\", \"readOnly\"], true);\n    }\n    // Check if metadata specify a valid numberOfLines, if yes then we pass that to cell settings\n    const numberOfLinesInEditor = cell.metadata.getIn([\n        types_1.MetadataNamespace,\n        \"numberOfLines\"\n    ]);\n    if (typeof numberOfLinesInEditor === \"number\" &&\n        numberOfLinesInEditor > 0 &&\n        numberOfLinesInEditor !== newSettings.editor.numberOfLines) {\n        newSettings = newSettings.setIn([\"editor\", \"numberOfLines\"], numberOfLinesInEditor);\n    }\n    // When metadata specify to hide the cell\n    const hideCell = cell.metadata.getIn([types_1.MetadataNamespace, \"hidden\"]);\n    if (hideCell === true && newSettings.showCell === true) {\n        newSettings = newSettings.setIn([\"showCell\"], false);\n    }\n    return newSettings;\n};\n//# sourceMappingURL=cellSettingsProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_contract_1 = require(\"@aznb/core-contract\");\nexports.theme = {\n    base: core_contract_1.Themes.Dark,\n    variables: new Map([\n        /*\n         * All Custom CSS Properties from AZNBC Package\n         *\n         * bg: background\n         * fg: foreground\n         */\n        [\"--theme-app-bg\", \"transparent\"],\n        [\"--theme-app-fg\", \"#f3f2f1\"],\n        [\"--theme-app-border\", \"#1b1a19\"],\n        [\"--theme-primary-bg\", \"transparent\"],\n        [\"--theme-primary-bg-hover\", \"transparent\"],\n        [\"--theme-primary-bg-focus\", \"transparent\"],\n        [\"--theme-primary-fg\", \"#f3f2f1\"],\n        [\"--theme-primary-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-primary-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-secondary-bg\", \"#201f1e\"],\n        [\"--theme-secondary-bg-hover\", \"#201f1e\"],\n        [\"--theme-secondary-bg-focus\", \"#201f1e\"],\n        [\"--theme-secondary-fg\", \"#252423\"],\n        [\"--theme-secondary-fg-hover\", \"#292827\"],\n        [\"--theme-secondary-fg-focus\", \"#323130\"],\n        [\"--theme-primary-shadow-hover\", \"0px 0px 6px rgba(0, 0, 0, 0.6)\"],\n        [\"--theme-primary-shadow-focus\", \"box-shadow(0px 0px 8px #000000)\"],\n        [\"--theme-title-bar-bg\", \"#2DFFFE\"],\n        [\"--theme-menu-bg\", \"#3b3a39\"],\n        [\"--theme-menu-bg-hover\", \"#323130\"],\n        [\"--theme-menu-bg-focus\", \"#292827\"],\n        [\"--theme-menu-shadow\", \"var(--theme-primary-shadow-hover)\"],\n        [\"--theme-menu-fg\", \"#f3f2f1\"],\n        [\"--theme-menu-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-menu-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-bg\", \"transparent\"],\n        [\"--theme-cell-shadow-hover\", \"var(--theme-primary-shadow-hover)\"],\n        [\"--theme-cell-shadow-focus\", \"var(--theme-primary-shadow-focus)\"],\n        [\"--theme-cell-vertical-toolbar-button-bg\", \"#323130\"],\n        [\"--theme-cell-vertical-toolbar-button-bg-hover\", \"#484644\"],\n        [\"--theme-cell-vertical-toolbar-button-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-vertical-toolbar-button-fg-hover\", \"#edebe9\"],\n        [\"--theme-cell-state-bar-cell-focused-bg\", \"transparent\"],\n        [\"--theme-cell-state-bar-editor-focused-bg\", \"transparent\"],\n        [\"--theme-cell-state-bar-no-focus-hover-bg\", \"transparent\"],\n        [\"--theme-cell-execute-button-command-mode-bg\", \"#1891e2\"],\n        [\"--theme-cell-execute-button-command-mode-bg-hover\", \"#42a2e2\"],\n        [\"--theme-cell-execute-button-command-mode-fg\", \"#000000\"],\n        [\"--theme-cell-execute-button-command-mode-fg-hover\", \"#000000\"],\n        [\"--theme-cell-execute-button-edit-mode-bg\", \"#66a656\"],\n        [\"--theme-cell-execute-button-edit-mode-bg-hover\", \"#7ab46c\"],\n        [\"--theme-cell-execute-button-edit-mode-fg\", \"#000000\"],\n        [\"--theme-cell-execute-button-edit-mode-fg-hover\", \"#000000\"],\n        [\"--theme-cell-execute-button-hover-bg\", \"#3b3a39\"],\n        [\"--theme-cell-execute-button-hover-bg-hover\", \"#484644\"],\n        [\"--theme-cell-execute-button-hover-fg\", \"#1891e2\"],\n        [\"--theme-cell-execute-button-hover-fg-hover\", \"#1891e2\"],\n        [\"--theme-cell-prompt-bg\", \"#201f1e\"],\n        [\"--theme-cell-prompt-bg-hover\", \"#292827\"],\n        [\"--theme-cell-prompt-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-prompt-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-prompt-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-prompt-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-toolbar-bg\", \"#201f1e\"],\n        [\"--theme-cell-toolbar-bg-hover\", \"#323130\"],\n        [\"--theme-cell-toolbar-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-toolbar-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-toolbar-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-toolbar-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-bg\", \"#252423\"],\n        [\"--theme-cell-menu-bg-hover\", \"#323130\"],\n        [\"--theme-cell-menu-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-menu-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-linktext\", \"0px solid\"],\n        [\"--theme-cell-input-bg\", \"#1e1e1e\"],\n        [\"--theme-cell-input-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-output-bg\", \"transparent\"],\n        [\"--theme-cell-output-bg-hover\", \"transparent\"],\n        [\"--theme-cell-output-bg-focus\", \"transparent\"],\n        [\"--theme-cell-output-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-creator-bg\", \"#252423\"],\n        [\"--theme-cell-creator-bg-hover\", \"#323130\"],\n        [\"--theme-cell-creator-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-creator-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-creator-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-creator-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-error-fg\", \"hsl(0, 100%, 95%)\"],\n        [\"--theme-error-bg\", \"hsl(0, 100%, 30%)\"],\n        [\"--theme-pager-bg\", \"#111\"],\n        [\"--theme-cell-border-width\", \"0\"],\n        [\"--theme-cell-input-border-width\", \"1px\"],\n        [\"--theme-cell-input-border-color\", \"#323130\"],\n        [\"--theme-cell-input-active-border-width\", \"1px\"],\n        [\"--prompt-width\", \"0px\"]\n    ]),\n    monacoTheme: {\n        base: \"vs-dark\",\n        inherit: true,\n        rules: [],\n        colors: {\n            // We want Monaco background to use the same background for our themes.\n            // Setting the background to transparent\n            \"editor.background\": \"#00000000\"\n        }\n    }\n};\n//# sourceMappingURL=theme.js.map","import React from \"react\";\nimport { PageName } from \"../notebookViewController\";\n\nexport interface ITabProps {\n  id: number;\n  name: PageName;\n  isActive?: boolean;\n  isDisabled?: boolean;\n  onClick: () => void;\n}\n\nexport const Tab = React.forwardRef((props: ITabProps, ref?: React.Ref<HTMLAnchorElement>) => {\n  let myClassName = \"nav-item nav-link\";\n  if (props.isActive) {\n    myClassName += \" active\";\n  }\n\n  return (\n    <a\n      id={\"tab\" + props.id.toString()}\n      className={myClassName}\n      role=\"tab\"\n      data-toggle=\"tab\"\n      aria-controls=\"nav-home\"\n      aria-selected=\"true\"\n      data-tabindex=\"0\"\n      onClick={props.onClick}\n      ref={ref}\n    >\n      {props.name}\n    </a>\n  );\n});\n\nTab.displayName = \"Tab\";\n","import React from \"react\";\nimport { TabData } from \"./Tabs\";\n\ninterface ITabDropdownProps {\n  name: string;\n  Tabs: TabData;\n  onClick: (idx: number) => void;\n}\n\nexport const TabDropdown = React.forwardRef((props: ITabDropdownProps, ref?: React.Ref<HTMLAnchorElement>) => {\n  return (\n    <div>\n      <a\n        id={\"navBarDropdown\"}\n        className=\"nav-item nav-link dropdown dropdown-toggle\"\n        role=\"button\"\n        data-toggle=\"dropdown\"\n        aria-controls=\"nav-home\"\n        aria-selected=\"true\"\n        aria-haspopup=\"true\"\n        aria-expanded=\"false\"\n        data-tabindex=\"0\"\n        ref={ref}\n      >\n        {props.name}\n      </a>\n      <div className=\"dropdown-menu dropdown-menu-right\">\n        {props.Tabs.map(([name, path], idx) => {\n          return <DropdownOption id={idx} key={name + idx} name={name} onClick={props.onClick.bind(path)} />;\n        })}\n      </div>\n    </div>\n  );\n});\n\nTabDropdown.displayName = \"TabDropdown\";\n\ninterface IDropdownOptionProps {\n  id: number;\n  name: string;\n  onClick: (idx: number) => void;\n}\n\nclass DropdownOption extends React.Component<IDropdownOptionProps> {\n  constructor(props: IDropdownOptionProps) {\n    super(props);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick() {\n    this.props.onClick(this.props.id);\n  }\n\n  render() {\n    return (\n      <a id={\"dropdownOption\" + this.props.id.toString()} className=\"dropdown-item\" onClick={this.onClick}>\n        {this.props.name}\n      </a>\n    );\n  }\n}\n","import React from \"react\";\n\nexport interface ITabArrowProps {\n  id: string;\n  isDisabled: boolean;\n  isLeftArrow: boolean;\n  onClick: () => void;\n}\n\nexport const TabArrow = React.forwardRef((props: ITabArrowProps, ref?: React.Ref<HTMLAnchorElement>) => {\n  let classId = \"nav-item nav-link arrow-nav\" + (props.isLeftArrow ? \" arrow-nav-left\" : \" arrow-nav-right\");\n  if (props.isDisabled) {\n    classId += \" disabled\";\n  }\n\n  return (\n    <a\n      id={\"arrow-\" + props.id}\n      className={classId}\n      role=\"tab\"\n      aria-controls=\"nav-home\"\n      aria-selected=\"true\"\n      data-tabindex=\"0\"\n      onClick={props.isDisabled ? undefined : props.onClick}\n      ref={ref}\n    ></a>\n  );\n});\n\nTabArrow.displayName = \"TabArrow\";\n","import React from \"react\";\nimport { PageName, NotebookRelativePath } from \"../notebookViewController\";\nimport { Tab } from \"./Tab\";\nimport { TabDropdown } from \"./TabDropdown\";\nimport { TabArrow } from \"./TabArrow\";\nimport { IActiveTab } from \"core-library\";\n\nexport type IsLocked = boolean;\nexport type TabData = Array<[PageName, NotebookRelativePath, IsLocked]>;\n\ntype IsShown = boolean;\ntype Width = number;\n\nexport interface INotebookTabsProps extends IActiveTab {\n  tabs: TabData;\n  activeTabPath: string;\n  onActivate: (url: string, idx: number) => void;\n}\n\ninterface INotebookTabsState {\n  showNavigationTabs: boolean;\n  navBarStartIndex: number;\n  navBarEndIndex: number;\n  navBarTotalWidth: number;\n}\n\n/*\n    Implements the Tabs Panel which includes the following:\n    1) Navigation Components (Left Arrow, Right Arrow and drop down)\n        - If requried all 3 components are shown.\n    2) List of tabs which activate a page when clicked.\n        - Tabs that don't fit on the clients width are hidden. You can use the nav components to travers them.\n*/\nexport class Tabs extends React.Component<INotebookTabsProps, INotebookTabsState> {\n  // Navigation Components\n  tabContainer: [React.RefObject<HTMLDivElement>, Width];\n  leftArrow: [React.RefObject<HTMLAnchorElement>, Width];\n  rightArrow: [React.RefObject<HTMLAnchorElement>, Width];\n  dropDown: [React.RefObject<HTMLAnchorElement>, Width];\n  tabs: Array<[IsShown, React.RefObject<HTMLAnchorElement>, Width, string, () => void]>;\n\n  resizeTimeout: number | undefined;\n\n  constructor(props: INotebookTabsProps) {\n    super(props);\n    this.select = this.select.bind(this);\n    this.onActivate = this.onActivate.bind(this);\n    this.resizeCallback = this.resizeCallback.bind(this);\n\n    // Populate tabs\n    this.tabs = new Array<[IsShown, React.RefObject<HTMLAnchorElement>, Width, string, () => void]>();\n\n    const leftArrowRef: React.RefObject<HTMLAnchorElement> = React.createRef();\n    this.leftArrow = [leftArrowRef, 0];\n\n    this.props.tabs.forEach(([name, path], idx) => {\n      const ref: React.RefObject<HTMLAnchorElement> = React.createRef();\n      this.tabs.push([true, ref, 0, name, this.onActivate.bind(this, path, idx)]);\n    });\n\n    this.rightArrow = [React.createRef(), 0];\n    this.dropDown = [React.createRef(), 0];\n    this.tabContainer = [React.createRef(), 0];\n\n    this.state = {\n      showNavigationTabs: true,\n      navBarStartIndex: 0,\n      navBarEndIndex: this.tabs.length,\n      anchorRight: false,\n      navBarTotalWidth: 0\n    } as INotebookTabsState;\n  }\n\n  onActivate(url: string, idx: number): void {\n    this.props.onActivate(url, idx);\n  }\n\n  // Handle selecting a tab on the panel. When a dropdown is selected.\n  select(tabIndex: number) {\n    // Index is not in range.\n    if (tabIndex < 0 || tabIndex >= this.props.tabs.length) {\n      return;\n    }\n\n    if (tabIndex < this.state.navBarStartIndex || tabIndex > this.state.navBarEndIndex) {\n      this.repopulate(tabIndex);\n    }\n\n    // Begin activation process\n    this.onActivate(this.props.tabs[tabIndex][1], tabIndex);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.resizeCallback);\n    this.initalizeWidths();\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  componentDidUpdate(prevProps: INotebookTabsProps, prevState: INotebookTabsState) {\n    // In case the index is not in the current display, call select\n    if (\n      prevProps.activeTabIndex != this.props.activeTabIndex ||\n      this.props.activeTabIndex > this.state.navBarEndIndex\n    ) {\n      this.select(this.props.activeTabIndex);\n    }\n  }\n\n  initalizeWidths() {\n    // Get lengths of Navbar compoenents (left arrow, rigth arrow and drop down)\n    this.leftArrow[1] = this.leftArrow[0].current?.offsetWidth ?? 0;\n    this.rightArrow[1] = this.rightArrow[0].current?.offsetWidth ?? 0;\n    this.dropDown[1] = this.dropDown[0].current?.offsetWidth ?? 0;\n    this.tabContainer[1] = this.tabContainer[0].current?.offsetWidth ?? 0;\n\n    // Start Total width with arrow lengths\n    let totalWidth = this.leftArrow[1] + this.rightArrow[1] + this.dropDown[1] + 30;\n\n    let shouldDisplay = true;\n    let updateNavBarEndIndex: number = this.tabs.length - 1;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    this.tabs = this.tabs.map(([isShown, ref, width, name, onclick], idx) => {\n      const currentWidth = ref.current?.offsetWidth ?? 0;\n      totalWidth += currentWidth;\n      if (shouldDisplay && totalWidth > this.tabContainer[1]) {\n        // Navbar Index ends here. Use the previous index\n        updateNavBarEndIndex = idx - 1;\n        shouldDisplay = false;\n      }\n\n      return [shouldDisplay, ref, currentWidth, name, onclick];\n    });\n\n    this.setState({\n      showNavigationTabs: !shouldDisplay,\n      navBarEndIndex: updateNavBarEndIndex,\n      navBarTotalWidth: totalWidth\n    });\n  }\n\n  // Tab Panel:  | < | Tab1 | Tab2 | *Active Tab3 *| > | ... |\n  // An active tab on the right most side of the tab panel is anchored/stuck to the corner.\n  // Resizing or clicking on the right most arrow will make sure that it is always active in the\n  // same spot.\n  repopulateRightAnchored(tabIndex: number, totalWidth: number) {\n    let shouldDisplay = false;\n    // We iterate through the tabs from the other end (reverse map).\n    for (let idx = this.tabs.length - 1; idx >= 0; idx--) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const [isShown, ref, width, name, onclick] = this.tabs[idx];\n\n      if (idx == tabIndex) {\n        shouldDisplay = true;\n      } else if (idx > tabIndex) {\n        shouldDisplay = false;\n      }\n\n      if (shouldDisplay) {\n        totalWidth += width;\n        if (totalWidth > (this.tabContainer[1] ?? 0)) {\n          // Looks like we have run out of space, lets use the last index we came across (in revesre so +)\n          this.setState({\n            navBarStartIndex: idx + 1,\n            navBarEndIndex: tabIndex,\n            showNavigationTabs: true\n          });\n          shouldDisplay = false;\n        }\n      }\n\n      this.tabs[idx] = [shouldDisplay, ref, width, name, onclick];\n    }\n  }\n\n  repopulateLeftAnchored(tabIndex: number, totalWidth: number, isResize: boolean) {\n    let shouldDisplay = false;\n    for (let idx = 0; idx < this.tabs.length; idx++){\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const [isShown, ref, width, name, onclick] = this.tabs[idx];\n      if (idx == tabIndex) {\n        shouldDisplay = true;\n      } else if (isResize && idx < tabIndex) {\n        shouldDisplay = false;\n      }\n\n      if (shouldDisplay) {\n        totalWidth += width;\n\n        if (totalWidth > (this.tabContainer[1] ?? 0)) {\n          // Looks like we are out of space, use the last index that worked.\n          this.setState({\n            navBarStartIndex: tabIndex,\n            navBarEndIndex: idx - 1,\n            showNavigationTabs: true\n          });\n          shouldDisplay = false;\n        }\n      }\n\n      this.tabs[idx] = [shouldDisplay, ref, width, name, onclick];\n    }\n  }\n\n  repopulate(tabIndex: number) {\n    // track the allocated pixel width\n    const totalWidth = this.leftArrow[1] + this.rightArrow[1] + this.dropDown[1] + 30;\n\n    if (\n      (this.tabContainer[0].current?.clientWidth &&\n      this.tabContainer[1] == this.tabContainer[0].current.clientWidth && // ref's are loaded, and we aren't in the middle of a resize\n      tabIndex >= 0 &&\n      tabIndex < this.props.tabs.length && // Is not an incorrect index value\n        tabIndex < this.state.navBarStartIndex) ||\n      tabIndex > this.state.navBarEndIndex\n    ) {\n      // Check if tabs need an update.\n\n      // Get the base width, with some padding.\n      if (tabIndex > this.state.navBarEndIndex) {\n        this.repopulateRightAnchored(tabIndex, totalWidth);\n      } else {\n        this.repopulateLeftAnchored(tabIndex, totalWidth, false);\n      }\n    } else if (\n      this.tabContainer[0].current?.clientWidth &&\n      this.tabContainer[1] != this.tabContainer[0].current.clientWidth\n    ) {\n      // Reset the tab container width to the new size.\n      const shouldUseRightAnchored = tabIndex == this.state.navBarEndIndex && this.state.navBarStartIndex != 0;\n      this.tabContainer[1] = this.tabContainer[0].current.clientWidth;\n\n      if (this.state.navBarTotalWidth > this.tabContainer[1]) {\n        // Looks like we need to resize\n        if (shouldUseRightAnchored) {\n          this.repopulateRightAnchored(tabIndex, totalWidth);\n        } else {\n          this.repopulateLeftAnchored(tabIndex, totalWidth, true);\n        }\n      }\n\n      this.forceUpdate();\n    }\n  }\n\n  resizeCallback() {\n    // Everytime reset is called we resize. If this gets too expensive\n    // we should \"debouce\" this. Use setIntercal with a small timeout (100 ms).\n    clearTimeout(this.resizeTimeout);\n    this.resizeTimeout = setTimeout(this.repopulate.bind(this, this.props.activeTabIndex) as TimerHandler, 200);\n  }\n\n  render() {\n    return (\n      <div id=\"tabContainer\" ref={this.tabContainer[0]}>\n        <nav>\n          <div id=\"nav-tabs\" className=\"nav nav-tabs tabs-sm dark-tabs window-tabs\" role=\"tablist\">\n            {this.state.showNavigationTabs ? (\n              <TabArrow\n                id={\"left\"}\n                key=\"leftArrow\"\n                isDisabled={this.props.activeTabIndex == 0}\n                isLeftArrow={true}\n                onClick={this.select.bind(this, this.props.activeTabIndex - 1)}\n                ref={this.leftArrow[0]}\n              ></TabArrow>\n            ) : null}\n            {this.tabs.map(([isShown, ref, , name, onClick], idx) => {\n              if (isShown) {\n                return (\n                  <Tab\n                    id={idx}\n                    name={name}\n                    key={idx}\n                    isActive={idx == this.props.activeTabIndex}\n                    onClick={onClick}\n                    ref={ref}\n                  />\n                );\n              }\n            })}\n            {this.state.showNavigationTabs ? (\n              <TabArrow\n                id={\"right\"}\n                key=\"rightArrow\"\n                isDisabled={this.props.activeTabIndex == this.props.tabs.length - 1}\n                isLeftArrow={false}\n                onClick={this.select.bind(this, this.props.activeTabIndex + 1)}\n                ref={this.rightArrow[0]}\n              ></TabArrow>\n            ) : null}\n            {this.state.showNavigationTabs ? (\n              <TabDropdown\n                name=\"...\"\n                key=\"tabDropdown\"\n                onClick={this.select.bind(this)}\n                Tabs={this.props.tabs}\n                ref={this.dropDown[0]}\n              />\n            ) : null}\n          </div>\n        </nav>\n      </div>\n    );\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.resizeCallback);\n  }\n}\n","import { MockIpcTelemetry, IIpcTelemetry } from \"core-library\";\n\ndeclare const window: { ipcTelemetry: IIpcTelemetry | undefined };\n\n/**\n * Create an instance of ipcTelemetry\n */\nfunction initIpcTelemetry() {\n  return window.ipcTelemetry || (new MockIpcTelemetry() as IIpcTelemetry);\n}\n\n/** A singleton instance of ipcTelemetry */\nlet ipcTelemetry: IIpcTelemetry | undefined;\n\n/**\n * Get instance of ipcTelemetry\n */\nexport function getIpcTelemetry() {\n  if (ipcTelemetry === undefined) {\n    ipcTelemetry = initIpcTelemetry();\n    ipcTelemetry.register(\"Everglade\", location.href, \"initialization\");\n  }\n\n  return ipcTelemetry;\n}\n","import React from \"react\";\nimport { NotebookParentElementId } from \"../types\";\nimport { getIpcTelemetry } from \"../telemetry\";\n\nexport interface INotebookProps {\n  notebookUrl: string;\n  activate: (url: string) => Promise<void>;\n}\n\n/**\n * log aznb errors\n *\n * @param error error to emit\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction aznbErrorListener(error: Event) {\n  getIpcTelemetry().error(error);\n}\n\nexport class Notebook extends React.Component<INotebookProps> {\n  constructor(props: INotebookProps) {\n    super(props);\n  }\n\n  async componentDidMount() {\n    const rootElement = document.getElementById(NotebookParentElementId);\n    if (!rootElement) {\n      console.warn(\n        `HTMLElement with ID '${NotebookParentElementId}' does not exist. Telemetry of aznb-error events will be turned off.`\n      );\n    } else {\n      rootElement.addEventListener(\"aznb-error\", aznbErrorListener);\n    }\n\n    this.props.activate(this.props.notebookUrl);\n  }\n\n  async componentDidUpdate() {\n    this.props.activate(this.props.notebookUrl);\n  }\n\n  componentWillUnmount() {\n    const rootElement = document.getElementById(NotebookParentElementId);\n    if (rootElement) {\n      rootElement.removeEventListener(\"aznb-error\", aznbErrorListener);\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  shouldComponentUpdate(_: INotebookProps, nextState: INotebookProps) {\n    return _.notebookUrl !== this.props.notebookUrl;\n  }\n\n  render() {\n    return (\n      <div id=\"tab-content\" className=\"window-tab\">\n        <div\n          className=\"tab-pane fade show active\"\n          id={NotebookParentElementId}\n          role=\"tabpanel\"\n        ></div>\n      </div>\n    );\n  }\n}\n","/* eslint-disable @typescript-eslint/no-namespace */\nimport { Locale } from \"extension-minecraft/lib/types\";\n\n// Minecraft Interface for communicating.\n// eslint-disable-next-line @typescript-eslint/interface-name-prefix\nexport interface IpcRenderer {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  sendToHost(event: string, body: any): void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  on(event: string, body: any): void;\n}\n\nexport interface ITabData {\n  id: number; // Not sure why we need this. Maps to page_id under metadata\n  title: string; // Contains the title. This should have a size limit.\n}\n\nexport const NotebookParentElementId = \"notebook-container\";\n\nexport interface INotebookLoader {\n  loadComponent: (filepath: string) => Promise<void>;\n  initalize(language: Locale): Promise<void>;\n}\n\nexport declare namespace TelemetryEvents {\n  // eslint-disable-next-line @typescript-eslint/interface-name-prefix\n  export interface Component {\n    id: string;\n    timeElapsed?: number;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    details?: any;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/interface-name-prefix\n  export interface Components {\n    components: Component[];\n  }\n}\n\nexport interface ISettings {\n  logToConsole: boolean;\n  locale: Locale;\n}\n","import React from \"react\";\n\ninterface IFooterButton {\n  onClick: () => void;\n}\n\ninterface IFooterButtonsProps {\n    previousButton?: IFooterButton;\n    nextButton?: IFooterButton;\n}\n\nexport class FooterButtons extends React.Component<IFooterButtonsProps> {\n  constructor(props: IFooterButtonsProps) {\n    super(props);\n  }\n\n  render() {\n    const classes = \"footer-button __ButtonLiteGrey arrow-nav\";\n    const classesLeft = classes + \" arrow-nav-left\";\n    const classesRight = classes + \" arrow-nav-right\";\n\n    return (\n      <div id=\"footerButtons\" className=\"footer_controls\">\n        <button\n          id={\"footerButtonPrevious\"}\n          className={classesLeft + (this.props.previousButton ? \"\" : \" disabled\")}\n          disabled={this.props.previousButton == undefined}\n          onClick={this.props.previousButton?.onClick}\n        >\n          <i className=\"icon icon_chevron-down\" aria-hidden=\"true\"></i>\n        </button>\n        <button\n          id={\"footerButtonNext\"}\n          className={classesRight + (this.props.nextButton ? \"\" : \" disabled\")}\n          disabled={this.props.nextButton == undefined}\n          onClick={this.props.nextButton?.onClick}\n        >\n          <i className=\"icon icon_chevron-down\" aria-hidden=\"true\"></i>\n        </button>\n      </div>\n    );\n  }\n}\n","// This file is for loading the lesson and notebook information.\n// These functions will take in the lesson json file and load\n// All the appropriate notebooks into tabs.\n\nimport { INotebookLoader, TelemetryEvents } from \"./types\";\nimport {\n  ILessonData,\n  NotebookContentProvider,\n  IIpcTelemetry,\n  MinecraftCommander,\n  MockMinecraftCommander,\n  IIpcRenderer,\n  IActiveTabProvider,\n  ActiveTabProvider,\n  IActiveTab\n} from \"core-library\";\nimport { IMcParams } from \"core-library\";\nimport React from \"react\";\nimport { INotebookTabsProps, TabData, Tabs } from \"./components/Tabs\";\nimport { Notebook } from \"./components/Notebook\";\nimport { Locale } from \"extension-minecraft/lib/types\";\nimport { GetLessonDataFunctor } from \"./lessonData\";\nimport { getIpcTelemetry } from \"./telemetry\";\nimport { FooterButtons } from \"./components/FooterButtons\";\n\nexport type PageId = string;\nexport type PageName = string;\nexport type NotebookRelativePath = string;\nexport type IsLocked = boolean;\n\ndeclare const window: {\n  ipcRenderer: IIpcRenderer | undefined;\n};\n\nexport interface INotebookControllerProps {\n  getLessonData: GetLessonDataFunctor;\n  azureNotebookLoader: INotebookLoader;\n  contentProvider: NotebookContentProvider;\n  params: IMcParams;\n}\n\ninterface INotebookControllerState {\n  // Since we start initalization after mounting. Flag to indicate loading has completed.\n  hasLoaded: boolean;\n  tabProps: INotebookTabsProps;\n}\n\n/*\n    ViewController that handles entrypoint into out app. Similar to App.tsx.\n    We are currently not using any off the shelf controller, since we just need one.\n\n    Current App lifecycle:\n    - Constructor - Sets up post mounting initalization functor. The functor does the following:\n        - Fetches the lessonData (lesson.json)\n        - Iniitalizes the Azure Notebook Components.\n        - Parses the lesson.json and downloads all notebooks.\n    - Render - Either renders a loading acreen or Actual Tabs/Notebook after it is available.\n    - OnComponentMounted  - Begins executing the above functor.\n*/\nexport class NotebookViewController extends React.Component<INotebookControllerProps, INotebookControllerState> {\n  // LessonData is populated after the Component has mounted.\n  private LessonData?: ILessonData;\n  private TelemetryProvider?: IIpcTelemetry;\n  private ActiveTabProvider?: IActiveTabProvider;\n\n  constructor(props: INotebookControllerProps) {\n    super(props);\n\n    this.state = {\n      hasLoaded: false,\n      tabProps: {\n        tabs: [],\n        activeTabPath: \"\"\n      }\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } as any;\n\n    this.onActivate = this.onActivate.bind(this);\n    this.onActivateByIndex = this.onActivateByIndex.bind(this);\n  }\n\n  // Start initalization after the initial app frame has loaded. Minecraft depends on scripts\n  // being injected, and each platform has a different timing. The best time would be after the\n  // component has moundtes.\n  async componentDidMount() {\n    this.ActiveTabProvider = new ActiveTabProvider(\n      localStorage,\n      window?.ipcRenderer ? MinecraftCommander.getInstance(window.ipcRenderer) : new MockMinecraftCommander()\n    );\n    this.TelemetryProvider = getIpcTelemetry();\n\n    let component = \"\";\n    const initEvent: TelemetryEvents.Components = { components: [] };\n\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const telemetry = async (comp: string, func: () => any | undefined) => {\n        component = comp;\n        const startTime = performance.now();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const details: any = await func();\n        const timeElapsed = Math.trunc(performance.now() - startTime);\n        initEvent.components.push({\n          id: component,\n          timeElapsed: timeElapsed,\n          details: details\n        } as TelemetryEvents.Component);\n      };\n\n      await telemetry(\"getLessonData\", async () => {\n        this.LessonData = await this.props.getLessonData();\n        this.TelemetryProvider?.setName(`Everglade:${this.LessonData.creatorName}:${this.LessonData.title}`);\n      });\n\n      await telemetry(\"aznb::initalize\", async () => {\n        await this.props.azureNotebookLoader.initalize(this.props.params.language as Locale);\n      });\n\n      await telemetry(\"loadNotebooks\", async () => {\n        const tabProps: INotebookTabsProps = await this.load();\n        this.setState({ hasLoaded: true, tabProps: tabProps });\n        return { notebookCount: tabProps.tabs?.length };\n      });\n    } catch (error) {\n      const e: Error = error;\n      this.TelemetryProvider?.error({\n        component: component,\n        message: e.message\n      });\n      this.setState(() => {\n        throw e;  \n      });\n      throw error;\n    } finally {\n      this.TelemetryProvider?.log(initEvent);\n    }\n  }\n\n  // Gets the path of a notebook based on supported languages.\n  private getNotebookPath(filename: string): string {\n    // When we go offline, we will need to fix this seperator based. Maybe the filesystem will ignore it.\n    const seperator = \"/\";\n\n    // en-us is the default language and shouldn't have its own folder.\n    if (\n      this.props.params.language &&\n      this.LessonData &&\n      this.LessonData.isLanguageSupported(this.props.params.language, this.LessonData.additionalLanguages)\n    ) {\n      return (\n        this.props.params.rootNotebookPath + seperator + this.props.params.language + seperator + filename + \".ipynb\"\n      );\n    } else {\n      return this.props.params.rootNotebookPath + filename + \".ipynb\";\n    }\n  }\n\n  private async load(): Promise<INotebookTabsProps> {\n    if (this.LessonData) {\n      const tabIndexFunctor = this.ActiveTabProvider?.get(\n        this.props.params.lessonJsonPath,\n        this.LessonData?.activityTracker?.data?.activitySelectorObjective,\n        (data: IActiveTab) => {\n          // Ignore calls that occur before loading is complete.\n          if (\n            this.state.hasLoaded &&\n            this.state.tabProps?.tabs &&\n            data.activeTabIndex > 0 &&\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            data.activeTabIndex < tabs.length\n          ) {\n            this.onActivate(this.state.tabProps.tabs[data.activeTabIndex][1], data.activeTabIndex);\n          }\n        }\n      ).then((activeTab) => {\n        return activeTab ? activeTab : ({ activeTabIndex: 0 } as IActiveTab);\n      });\n\n      const pagePaths = await Promise.all(\n        this.LessonData.pages.map(async (page) => {\n          const path = this.getNotebookPath(page);\n          try {\n            const notebook = await this.props.contentProvider.get(path, true);\n            // TODO: Validate Metadata Minecraft\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const metadata = notebook.metadata as any;\n            return [metadata.minecraft.page_name, path] as [PageName, NotebookRelativePath];\n          } catch (error) {\n            const e = new Error(\"Notebook could not be loaded from path: \" + path);\n            throw e;\n          }\n\n        })\n      );\n\n      const tabIndex = await tabIndexFunctor;\n      const tabs: TabData = [];\n      for (const [name, path] of pagePaths) {\n        tabs.push([name, path, false]);\n      }\n\n      const index =\n        tabIndex !== undefined && tabIndex.activeTabIndex >= 0 && tabIndex.activeTabIndex < tabs.length\n          ? tabIndex.activeTabIndex\n          : 0;\n\n      return {\n        tabs,\n        activeTabPath: pagePaths[index][1],\n        activeTabIndex: index\n      } as INotebookTabsProps;\n    } else {\n      throw new Error(\"Notebook Controller Loading failed: LessonData cant be empty.\");\n    }\n  }\n\n  onActivate(url: string, idx: number) {\n    const tabProps = this.state.tabProps;\n    tabProps.activeTabPath = url;\n    tabProps.activeTabIndex = idx;\n    this.setState({ hasLoaded: true, tabProps: tabProps });\n  }\n\n  onActivateByIndex(idx: number) {\n    this.onActivate(this.getTabPathFromIndex(idx), idx);\n  }\n\n  getTabPathFromIndex(index: number): string {\n    let path = \"\";\n    for (let idx = 0; idx < this.state.tabProps.tabs.length; idx++) {\n      if (index === idx) {\n        path = this.state.tabProps.tabs[idx][1];\n      }\n    }\n    return path;\n  }\n\n  public render() {\n    if (!this.state.hasLoaded) {\n      return (\n        <span className=\"page-loader\">\n          <img />\n        </span>\n      );\n    } else {\n      this.TelemetryProvider?.setContext(\"loaded\");\n      return (\n        <div id=\"page\" className=\"pageBody\">\n          <div id=\"body\">\n            <Tabs\n              tabs={this.state.tabProps.tabs}\n              activeTabPath={this.state.tabProps.activeTabPath}\n              activeTabIndex={this.state.tabProps.activeTabIndex}\n              onActivate={this.onActivate}\n            />\n\n            <div className=\"scroll-pane-wrapper\">\n              <div id=\"#scroll-pane\" className=\"scroll-target\">\n                <Notebook\n                  notebookUrl={this.state.tabProps.activeTabPath}\n                  activate={async (url: string) => {\n                    return this.props.azureNotebookLoader.loadComponent(url);\n                  }}\n                />\n                <FooterButtons\n                  previousButton={\n                    this.state.tabProps.activeTabIndex == 0\n                      ? undefined\n                      : { onClick: this.onActivateByIndex.bind(this, this.state.tabProps.activeTabIndex - 1) }\n                  }\n                  nextButton={\n                    this.state.tabProps.activeTabIndex == this.state.tabProps.tabs.length - 1\n                      ? undefined\n                      : { onClick: this.onActivateByIndex.bind(this, this.state.tabProps.activeTabIndex + 1) }\n                  }\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n","export default {\n  ErrorBoundaryMessage: \"An unexpected error has occured while trying to load Azure Notebooks. Try exiting and re-opening.\",\n  ErrorInfoPrefix: \"Error Info: \"\n};\n","import { ISettings } from \"./types\";\n\nexport const settings: ISettings = {\n  logToConsole: true,\n  locale: \"en-us\"\n};\n","import en from \"./en\";\nimport { settings } from \"../evergladeSettings\";\nimport LocalizedStrings from \"react-localization\";\nimport zhCn from \"./zh-cn\";\n\ntype ILanguageStrings = typeof en;\n\n// Append \"PS_\" prefix to every string to create a pesudo language pack\nconst createPesudoStrings = (origin: ILanguageStrings): ILanguageStrings => {\n  const result = {} as ILanguageStrings;\n  Object.keys(origin).forEach((k: keyof ILanguageStrings) => {\n    result[k] = \"PS_\" + origin[k];\n  });\n\n  return result;\n};\n\nconst ps = createPesudoStrings(en);\n\nconst strings = new LocalizedStrings({\n  \"en-us\": en,\n  \"ps-ps\": ps,\n  \"zh-cn\": zhCn\n});\n\nstrings.setLanguage(\"en-us\");\n\nexport const getLocStrings = () => {\n  if (settings.locale !== strings.getLanguage()) {\n    strings.setLanguage(settings.locale);\n  }\n  return strings;\n};\n","export default {\n  ErrorBoundaryMessage: \"An unexpected error has occured while trying to load Azure Notebooks. Try exiting and re-opening.\",\n  ErrorInfoPrefix: \"Error Info: \"\n};\n","import React from \"react\";\nimport { IIpcTelemetry } from \"core-library\";\nimport { getIpcTelemetry } from \"../telemetry\";\nimport { getLocStrings } from \"../localization\";\n\ninterface IErrorBoundaryState {\n  hasError: boolean;\n  errorMessage: string;\n}\n\nexport class ErrorBoundary extends React.Component<{}, IErrorBoundaryState> {\n  private telemetryLogger: IIpcTelemetry;\n\n  constructor(props = {}) {\n    super(props);\n    this.state = { hasError: false, errorMessage: \"\" };\n    this.telemetryLogger = getIpcTelemetry();\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    return { hasError: true, errorMessage: error.message };\n  }\n\n  componentDidCatch(error: Error) {\n    this.telemetryLogger.error(error);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      const locStrings = getLocStrings();\n\n      return (\n        <div>\n          <h1 id=\"error-boundary-header\" style={{color:\"white\"}}>{locStrings.ErrorBoundaryMessage}</h1>\n          <p id=\"error-boundary-message\" style={{color:\"white\"}}>{locStrings.ErrorInfoPrefix + this.state.errorMessage}</p>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}","import { ILessonData, AdditionalLanguages, ValidateLessonData } from \"core-library\";\n\n/**\n * Check if language is supported\n *\n * @param lang - language to check\n * @param additionalLanguages - language packs to look for the language\n */\nfunction defaultIsLanguageSupported(lang: string, additionalLanguages: AdditionalLanguages) {\n  return !!additionalLanguages && additionalLanguages.includes(lang);\n}\n\nexport type GetLessonDataFunctor = () => Promise<ILessonData>;\n\n/**\n * Retrieves the lesson.json from the given url.\n * We currently don't cache the lesson.json.\n *\n * @param url - url\n */\nexport async function GetLessonData(url: string, bypassCache?: boolean): Promise<ILessonData> {\n  const httpOptions: RequestInit = {\n    method: \"GET\",\n    headers: Object.create(null),\n    mode: \"cors\",\n  };\n\n  if (bypassCache) {\n    httpOptions.cache = \"no-store\";\n  }\n\n  return fetch(url, httpOptions)\n    .then((response: Response) => {\n      return response.json();\n    })\n    .then((json: ILessonData) => {\n      if (ValidateLessonData(json)) {\n        json.isLanguageSupported = defaultIsLanguageSupported;\n        return json;\n      } else {\n        throw new Error(\"Invalid LessonData. title, description and pages are all required values.\");\n      }\n    })\n    .catch((error) => {\n      console.error(`Failed to get lesson data: ${error}`);\n      throw error;\n    });\n}\n","import { INotebookLoader, NotebookParentElementId } from \"./types\";\nimport AzureNotebooks from \"@aznb/extension-contract\";\nimport MinecraftExtension, { mapLocaleToAznbLocale, Locale } from \"extension-minecraft\";\nimport { IIpcTelemetry } from \"core-library\";\nimport { getIpcTelemetry } from \"./telemetry\";\n\n// Load Notebook on specified id\nexport class AzureNotebookLoader implements INotebookLoader {\n  private isInitalized: boolean;\n  private rootElementId: string;\n  private telemetryLogger: IIpcTelemetry;\n  private locale: Locale | undefined;\n\n  constructor(rootElementId: string = NotebookParentElementId) {\n    this.rootElementId = rootElementId;\n    this.isInitalized = false;\n\n    this.telemetryLogger = getIpcTelemetry();\n  }\n\n  public async initalize(language: Locale = \"en-us\"): Promise<void> {\n    this.locale = language;\n    MinecraftExtension.settings.locale = language;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    AzureNotebooks.registerExtension(MinecraftExtension as any);\n\n    return AzureNotebooks.init({\n      userHasGivenCookieConsent: false,\n      lazyLoadEditor: false,\n      getResourceIdAndKey: () =>\n        Promise.resolve({\n          notebookResourceId: \"\",\n          notebookResourceKey: \"\"\n        })\n    }).then(() => {\n      this.isInitalized = true;\n    });\n  }\n\n  public async loadComponent(filepath: string): Promise<void> {\n    if (!this.isInitalized) {\n      throw new Error(\"Initalize needs to be called before proceeding.\");\n    }\n\n    const nb = await AzureNotebooks.loadNotebook({\n      parentElementId: this.rootElementId,\n      filePath: filepath, //BUG: filepath must be a url\n      config: {\n        disableOutputIframe: true,\n        locale: mapLocaleToAznbLocale(this.locale)\n      },\n      extensions: [\"minecraft\"]\n    });\n\n    // This token info is overridden by the extension to use the ipc protocol from Minecraft\n    // Example compute setting: local jupyter host with token auth\n    const compute = {\n      name: \"Local\",\n      targetUrl: \"http://localhost:8888\",\n      getAuthSettings: () =>\n        Promise.resolve({\n          authType: \"token\",\n          token: \"token to access your local jupyter host\"\n        }),\n      shouldMount: false\n    };\n\n    await nb.setCompute({ targetSettings: compute });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ReadUrlParams, ExtractUrlParams, IMcParams } from \"core-library\";\nimport { NotebookViewController } from \"./notebookViewController\";\nimport { ErrorBoundary } from \"./components/ErrorBoundary\";\nimport { GetLessonData } from \"./lessonData\";\nimport { NotebookContentProvider } from \"core-library\";\nimport { AzureNotebookLoader } from \"./azureNotebookLoader\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"bootstrap/js/dist/util\";\nimport \"bootstrap/js/dist/dropdown\";\nimport \"minecraft-styles/uwux-assets/css/mc_screen.css\";\nimport \"./index.scss\";\n\nconst parameters: IMcParams = ExtractUrlParams();\nconsole.log(`Starting Up Notebooks with the following paramters: ${JSON.stringify(parameters)}`);\n\nReactDOM.render(\n  <ErrorBoundary>\n    <NotebookViewController\n      getLessonData={() => {\n        return GetLessonData(parameters.lessonJsonPath, parameters.disableLessonDataCache);\n      }}\n      azureNotebookLoader={new AzureNotebookLoader()}\n      contentProvider={new NotebookContentProvider(localStorage)}\n      params={parameters}\n    />\n  </ErrorBoundary>\n  ,\n  document.getElementById(\"root\")\n);\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_1 = __importDefault(require(\"./config\"));\nconst ButtonsPanel_1 = require(\"./components/ButtonsPanel\");\nconst protocol_1 = require(\"./protocol\");\nconst types_1 = require(\"./types\");\nconst cellSettingsProcessor_1 = require(\"./cellSettingsProcessor\");\nconst extensionSettings_1 = require(\"./extensionSettings\");\nrequire(\"../styles/index.scss\");\nconst theme_1 = require(\"./theme\");\nconst core_library_1 = require(\"core-library\");\nvar extensionSettings_2 = require(\"./extensionSettings\");\nexports.mapLocaleToAznbLocale = extensionSettings_2.mapLocaleToAznbLocale;\n__export(require(\"./types\"));\nconst extension = {\n    name: \"minecraft\",\n    config: config_1.default,\n    activate: (context) => {\n        context.components.register(\"ButtonsPanel\", ButtonsPanel_1.ButtonsPanel);\n        context.compute.registerProtocol(types_1.MyComputeProtocol, protocol_1.createRuntime());\n        context.commands.registerCellSettingsProcessor(\"minecraft-metadata\", cellSettingsProcessor_1.cellSettingsProcessor);\n        const parameters = core_library_1.ExtractUrlParams();\n        context.commands.registerMarkdownImageUriTransformer((url) => {\n            console.log('Uri Transformer Called: ' + url);\n            if (/^https?:/.test(url) || url.startsWith(\"/\"))\n                return url;\n            else\n                return parameters.rootNotebookPath + \"/\" + url;\n        });\n        context.theme.registerTheme(\"minecraft\", theme_1.theme);\n    }\n};\nexports.default = Object.assign(Object.assign({}, extension), { settings: extensionSettings_1.settings });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExtensionName = \"minecraft\";\n/**\n * Name of my custom protocol\n */\nexports.MyComputeProtocol = \"minecraft-ipc\";\n/**\n * Namespace for minecraft's own metadata of a cell data entity\n */\nexports.MetadataNamespace = \"minecraft\";\n/**\n * List of all onCodeCommand id's that a cell can contain.\n */\nvar CodeListenerIds;\n(function (CodeListenerIds) {\n    // onCodeStartedCommand: Called just before an execute command is sent to the game.\n    CodeListenerIds[\"onCodeStartedCommand\"] = \"onCodeStartedCommand\";\n    // onCodeStoppedCommand: Called whenever code execution is stopped. This is followed\n    // by a cancelled/successfull/error event.\n    CodeListenerIds[\"onCodeStoppedCommand\"] = \"onCodeStoppedCommand\";\n    CodeListenerIds[\"onCodeCancelledCommand\"] = \"onCodeCancelledCommand\";\n    CodeListenerIds[\"onCodeSuccessfulCommand\"] = \"onCodeSuccessfulCommand\";\n    CodeListenerIds[\"onCodeErrorCommand\"] = \"onCodeErrorCommand\";\n})(CodeListenerIds = exports.CodeListenerIds || (exports.CodeListenerIds = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_contract_1 = require(\"@aznb/core-contract\");\n/**\n * Convert this locale type to Aznb's Locale enum type\n *\n * @param locale - Extension's locale value\n */\nfunction mapLocaleToAznbLocale(locale) {\n    switch (locale) {\n        case \"zh-cn\":\n            return core_contract_1.Locale.zh_Hans;\n        case \"ps-ps\":\n            return core_contract_1.Locale.pseudo;\n        default:\n            return core_contract_1.Locale.en;\n    }\n}\nexports.mapLocaleToAznbLocale = mapLocaleToAznbLocale;\nexports.settings = {\n    logToConsole: true,\n    locale: \"en-us\"\n};\n//# sourceMappingURL=extensionSettings.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uuid_1 = require(\"uuid\");\n// Create the JSON data to subscribe to an event\nfunction createSubscribeRequest(eventName, unsubscribe = false) {\n    const header = {\n        requestId: uuid_1.v4(),\n        messagePurpose: 'subscribe',\n        version: 1,\n        messageType: 'commandRequest'\n    };\n    const body = {\n        version: 1,\n        eventName: eventName\n    };\n    const request = {\n        header: header,\n        body: body\n    };\n    if (unsubscribe) {\n        request.header.messagePurpose = 'unsubscribe';\n    }\n    return request;\n}\nfunction createCommandRequest(command) {\n    const header = {\n        requestId: uuid_1.v4(),\n        messagePurpose: 'commandRequest',\n        version: 1,\n        messageType: 'commandRequest'\n    };\n    const body = {\n        commandLine: command,\n        version: 1\n    };\n    const request = {\n        header: header,\n        body: body\n    };\n    return request;\n}\nclass GenericCommand {\n    constructor(command, throwOnError) {\n        this.request = createCommandRequest(command);\n        this.throwOnError = throwOnError;\n    }\n    handleError(message) {\n        if (this.throwOnError) {\n            throw new Error(message);\n        }\n    }\n    parse(statusMessage) {\n        throw new Error('Command must implement parse.');\n    }\n    responseHandler(response) {\n        if (response.body.statusCode) {\n            this.handleError(response.body.statusMessage);\n        }\n        else if (response.body) {\n            return this.parse(response.body.statusMessage);\n        }\n        else {\n            this.handleError(\"Incorrect Command Response.\");\n        }\n        return false;\n    }\n}\nexports.GenericCommand = GenericCommand;\nclass GenericListenerCommand {\n    constructor(eventName, throwOnError = false) {\n        this.request = createSubscribeRequest(eventName);\n        this.throwOnError = throwOnError;\n    }\n    handleError(message) {\n        if (this.throwOnError) {\n            throw new Error(message);\n        }\n    }\n    parse(body) {\n        throw new Error('Command must implement parse.');\n    }\n    responseHandler(response) {\n        if (response.body.statusCode) {\n            this.handleError(response.body.statusMessage);\n        }\n        else {\n            this.handleError(\"Incorrect Command Response.\");\n        }\n        return false;\n    }\n}\nexports.GenericListenerCommand = GenericListenerCommand;\n// Executes any command and ignores the response.\nclass AnyCommand extends GenericCommand {\n    constructor(command, throwOnError = false) {\n        super(command, throwOnError);\n    }\n    parse(statusMessage) {\n        return;\n    }\n}\nexports.AnyCommand = AnyCommand;\n//# sourceMappingURL=Commands.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction IsInGame() {\n    const searchParams = window === null || window === void 0 ? void 0 : window.location.search;\n    return searchParams && (new URLSearchParams(searchParams).get(\"inGame\") === \"1\");\n}\nexports.IsInGame = IsInGame;\n/**\n * Grab the Url paramters from the browser location object.\n *\n * @param location - Maps to the window.location object\n */\nfunction ExtractUrlParams(location = window.location) {\n    const rootUrl = location.origin + location.pathname.substring(0, location.pathname.lastIndexOf(\"/\"));\n    return ReadUrlParams(window.location.search, rootUrl);\n}\nexports.ExtractUrlParams = ExtractUrlParams;\n/**\n * Parse url parameters from query string\n *\n * @param urlQueryString - query string\n * @param rootUrl - host origin\n */\nfunction ReadUrlParams(urlQueryString, rootUrl = window.location.origin) {\n    var _a, _b, _c;\n    const searchParams = new URLSearchParams(urlQueryString);\n    const lessonJsonPath = searchParams.get(\"lesson\");\n    if (!lessonJsonPath) {\n        throw new Error(\"Invalid Lesson Json.\");\n    }\n    let rootLessonPath = searchParams.get(\"notebookRoot\");\n    if (!rootLessonPath) {\n        const rootPath = lessonJsonPath.substring(0, lessonJsonPath.lastIndexOf(\"/\") + 1);\n        if (rootPath.toLowerCase().startsWith(\"http\")) {\n            rootLessonPath = rootPath;\n        }\n        else {\n            // Looks like a relative url. Azure Notebook Loader expects a complete url.\n            rootLessonPath = rootUrl + \"/\" + rootPath;\n        }\n    }\n    const lang = (_a = searchParams.get(\"lang\")) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase();\n    const debug = ((_b = searchParams.get(\"debugMode\")) === null || _b === void 0 ? void 0 : _b.toLocaleLowerCase()) === \"true\";\n    const inGame = searchParams.get(\"inGame\") === \"1\";\n    const disableLessonDataCache = ((_c = searchParams.get(\"disableLessonDataCache\")) === null || _c === void 0 ? void 0 : _c.toLocaleLowerCase()) === \"true\";\n    return {\n        lessonJsonPath: lessonJsonPath,\n        rootNotebookPath: rootLessonPath,\n        language: lang,\n        debug: debug,\n        inGame: inGame,\n        disableLessonDataCache: disableLessonDataCache,\n    };\n}\nexports.ReadUrlParams = ReadUrlParams;\n//# sourceMappingURL=UrlReader.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst extensionSettings_1 = require(\"./extensionSettings\");\n// Define a dummy logger for case that logger is disabled.\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => { };\nconst noopLogger = {\n    log: noop,\n    error: noop\n};\nexports.createLogger = (name) => {\n    const formatMsg = (msg) => `${name}: ${msg}`;\n    const loggerTarget = extensionSettings_1.settings.logToConsole === true ? console : noopLogger;\n    return {\n        log: (msg) => loggerTarget.log(formatMsg(msg)),\n        error: (msg) => loggerTarget.error(formatMsg(msg))\n    };\n};\n//# sourceMappingURL=logger.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Commands_1 = require(\"./Commands\");\nclass GetScoreboardCommand extends Commands_1.GenericCommand {\n    constructor(objectiveName, selector, throwOnError = false) {\n        super(`scoreboard players get ${selector} ${objectiveName}`, throwOnError);\n    }\n    parse(message) {\n        let num = Number(message);\n        if (!isNaN(num)) {\n            return num;\n        }\n    }\n}\nexports.GetScoreboardCommand = GetScoreboardCommand;\nclass GetAndListenScoreboardCommand extends Commands_1.GenericCommand {\n    constructor(objectiveName, selector, throwOnError = false) {\n        super(`codebuilder subscribe scoreboard ${selector} ${objectiveName}`, throwOnError);\n    }\n    parse(message) {\n        let num = Number(message);\n        return !isNaN(num) ? num : undefined;\n    }\n}\nexports.GetAndListenScoreboardCommand = GetAndListenScoreboardCommand;\nclass CodeBuilderScoreChangedCommand extends Commands_1.GenericListenerCommand {\n    constructor(throwOnError = false) {\n        super(\"CodeBuilderScoreChanged\", throwOnError);\n    }\n    parse(body) {\n        if (body.properties && body.properties.Objective && (body.properties.Score !== undefined)) {\n            let num = Number(body.properties.Score);\n            if (isNaN(num)) {\n                throw new Error(`CodeBuilderScoreChangedCommand::Parse does not contain a number.: ${body.properties.Score}`);\n            }\n            else {\n                return { Objective: body.properties.Objective, Score: num };\n            }\n        }\n        else {\n            throw new Error(`CodeBuilderScoreChangedCommand::Parse does not contain required values body:${JSON.stringify(body)}`);\n        }\n    }\n}\nexports.CodeBuilderScoreChangedCommand = CodeBuilderScoreChangedCommand;\n//# sourceMappingURL=Scoreboard.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass MockEvent {\n    constructor() {\n        this.events = {};\n    }\n    on(event, listener) {\n        if (typeof this.events[event] !== 'object') {\n            this.events[event] = [];\n        }\n        this.events[event].push(listener);\n    }\n    removeListener(event, listener) {\n        var idx;\n        if (typeof this.events[event] === 'object') {\n            idx = this.events[event].indexOf(listener);\n            if (idx > -1) {\n                this.events[event].splice(idx, 1);\n            }\n        }\n    }\n    once(event, listener) {\n        this.on(event, function g() {\n            this.removeListener(event, g);\n            listener.apply(self, arguments);\n        });\n    }\n    emit(event) {\n        var i, listeners, length;\n        if (typeof this.events[event] === 'object') {\n            let listeners = this.events[event].slice();\n            let length = listeners.length;\n            for (i = 0; i < length; i++) {\n                listeners[i].apply(self, arguments);\n            }\n        }\n    }\n}\nexports.MockEvent = MockEvent;\n//# sourceMappingURL=mockEvent.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst en_1 = __importDefault(require(\"./en\"));\nconst extensionSettings_1 = require(\"../extensionSettings\");\nconst react_localization_1 = __importDefault(require(\"react-localization\"));\nconst zh_cn_1 = __importDefault(require(\"./zh-cn\"));\n// Append \"PS_\" prefix to every string to create a pesudo language pack\nconst createPesudoStrings = (origin) => {\n    const result = {};\n    Object.keys(origin).forEach((k) => {\n        result[k] = \"PS_\" + origin[k];\n    });\n    return result;\n};\nconst ps = createPesudoStrings(en_1.default);\nconst strings = new react_localization_1.default({\n    \"en-us\": en_1.default,\n    \"ps-ps\": ps,\n    \"zh-cn\": zh_cn_1.default\n});\nstrings.setLanguage(\"en-us\");\nexports.getLocStrings = () => {\n    if (extensionSettings_1.settings.locale !== strings.getLanguage()) {\n        strings.setLanguage(extensionSettings_1.settings.locale);\n    }\n    return strings;\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResultMessages = {\n    CompilationSucceeds: \"Compilation completes successfully!\",\n    ExecutionSucceeds: \"Execution completes successfully!\",\n    ExecutionCancelled: \"Execution is cancelled.\"\n};\n//# sourceMappingURL=types.js.map"],"sourceRoot":""}